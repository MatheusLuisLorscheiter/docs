---
title: "Atualizar Automa√ß√£o"
api: "PUT /api/automations/{id}"
description: "Atualiza os campos de uma automa√ß√£o existente"
---

<Tip>
Voc√™ pode atualizar qualquer campo da automa√ß√£o. Os campos n√£o enviados mant√™m seus valores atuais.
</Tip>

<Warning>
Altera√ß√µes no agendamento ou filtros afetam apenas as pr√≥ximas execu√ß√µes. Execu√ß√µes em andamento n√£o s√£o afetadas.
</Warning>

## Path Parameters

<ParamField path="id" type="number" required>
  ID da automa√ß√£o
</ParamField>

## Headers

<ParamField header="Content-Type" type="string" required>
  application/json
</ParamField>

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Body

Mesma estrutura da cria√ß√£o. Voc√™ pode enviar apenas os campos que deseja alterar:

<ParamField body="name" type="string">
  Nome da automa√ß√£o
</ParamField>

<ParamField body="description" type="string">
  Descri√ß√£o da automa√ß√£o
</ParamField>

<ParamField body="isActive" type="boolean">
  Ativar ou desativar a automa√ß√£o
</ParamField>

<ParamField body="scheduleType" type="string">
  Tipo de agendamento (DAILY, WEEKLY, MONTHLY, CRON)
</ParamField>

<ParamField body="schedule" type="object">
  Configura√ß√£o do agendamento
</ParamField>

<ParamField body="databaseConfigId" type="number">
  ID da configura√ß√£o de banco de dados
</ParamField>

<ParamField body="filters" type="array">
  Filtros de segmenta√ß√£o
</ParamField>

<ParamField body="messageConfig" type="object">
  Configura√ß√£o da mensagem
</ParamField>

<ParamField body="evolutionConfigId" type="number">
  ID da configura√ß√£o Evolution
</ParamField>

<ParamField body="intervalMinSeconds" type="number">
  Intervalo m√≠nimo entre mensagens
</ParamField>

<ParamField body="intervalMaxSeconds" type="number">
  Intervalo m√°ximo entre mensagens
</ParamField>

<ParamField body="notificationPhone" type="string">
  Telefone para notifica√ß√£o
</ParamField>

<ParamField body="dedupStrategy" type="string">
  Estrat√©gia de deduplica√ß√£o
</ParamField>

<ParamField body="dedupCooldownDays" type="number">
  Dias de cooldown
</ParamField>

<ParamField body="sendLimitPerRun" type="number">
  Limite por execu√ß√£o
</ParamField>

<RequestExample>

```bash cURL
# Atualizar apenas o nome e descri√ß√£o
curl -X PUT https://api.disparador.com/api/automations/10 \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: seu-access-token" \
  -d '{
    "name": "Aniversariantes - Novo Nome",
    "description": "Descri√ß√£o atualizada"
  }'

# Desativar automa√ß√£o
curl -X PUT https://api.disparador.com/api/automations/10 \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: seu-access-token" \
  -d '{
    "isActive": false
  }'

# Alterar hor√°rio de execu√ß√£o
curl -X PUT https://api.disparador.com/api/automations/10 \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: seu-access-token" \
  -d '{
    "schedule": {
      "timeOfDay": "10:00",
      "timezone": "America/Sao_Paulo"
    }
  }'
```

```javascript JavaScript
// Atualizar mensagem
const updateMessage = {
  messageConfig: {
    message: "üéâ Feliz Anivers√°rio {PrimeiroNome}! üéÇ\n\nQue seu dia seja especial!",
    mediaUrl: "https://exemplo.com/aniversario.jpg",
    mediaType: "image"
  }
};

const response = await fetch('https://api.disparador.com/api/automations/10', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Token': 'seu-access-token'
  },
  body: JSON.stringify(updateMessage)
});

// Alterar agendamento para semanal
const updateSchedule = {
  scheduleType: "WEEKLY",
  schedule: {
    timeOfDay: "14:00",
    timezone: "America/Sao_Paulo",
    weekdays: [2, 4, 6] // Segunda, Quarta, Sexta
  }
};

await fetch('https://api.disparador.com/api/automations/10', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Token': 'seu-access-token'
  },
  body: JSON.stringify(updateSchedule)
});
```

```python Python
import requests

# Atualizar filtros
update_filters = {
    "filters": [
        {
            "filterId": "birthday",
            "ignoreYear": True
        },
        {
            "filterId": "segment",
            "value": "VIP",
            "operator": "equals"
        }
    ]
}

response = requests.put(
    'https://api.disparador.com/api/automations/10',
    json=update_filters,
    headers={
        'X-Access-Token': 'seu-access-token'
    }
)

# Alterar estrat√©gia de deduplica√ß√£o
update_dedup = {
    "dedupStrategy": "COOLDOWN_DAYS",
    "dedupCooldownDays": 30
}

response = requests.put(
    'https://api.disparador.com/api/automations/10',
    json=update_dedup,
    headers={
        'X-Access-Token': 'seu-access-token'
    }
)
```

```php PHP
<?php
// Atualizar intervalos
$updateData = [
    'intervalMinSeconds' => 10,
    'intervalMaxSeconds' => 30,
    'sendLimitPerRun' => 200
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.disparador.com/api/automations/10");
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'X-Access-Token: seu-access-token'
]);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($updateData));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$result = json_decode($response, true);
echo "Automa√ß√£o atualizada: " . $result['name'];
?>
```

</RequestExample>

## Response

Retorna o objeto completo da automa√ß√£o atualizada, com a mesma estrutura do endpoint GET.

<ResponseExample>

```json 200 - Sucesso
{
  "id": 10,
  "name": "Aniversariantes - Novo Nome",
  "description": "Descri√ß√£o atualizada",
  "isActive": true,
  "scheduleType": "DAILY",
  "schedule": {
    "timeOfDay": "10:00",
    "timezone": "America/Sao_Paulo",
    "weekdays": [2, 3, 4, 5, 6]
  },
  "databaseConfigId": 1,
  "evolutionConfigId": 2,
  "intervalMinSeconds": 10,
  "intervalMaxSeconds": 30,
  "notificationPhone": null,
  "dedupStrategy": "COOLDOWN_DAYS",
  "dedupCooldownDays": 30,
  "sendLimitPerRun": 200,
  "lastRunAt": "2024-01-21T09:00:00",
  "nextRunAt": "2024-01-22T10:00:00",
  "createdAt": "2024-01-01T10:00:00",
  "updatedAt": "2024-01-21T16:30:00"
}
```

```json 404 - N√£o Encontrada
{
  "message": "Automa√ß√£o n√£o encontrada"
}
```

```json 400 - Erro de Valida√ß√£o
{
  "message": "scheduleType inv√°lido"
}
```

```json 401 - Token Inv√°lido
{
  "message": "Access token inv√°lido"
}
```

</ResponseExample>

## Casos de Uso Comuns

### 1. Pausar Temporariamente
```json
{
  "isActive": false
}
```

### 2. Alterar Hor√°rio
```json
{
  "schedule": {
    "timeOfDay": "08:30"
  }
}
```

### 3. Adicionar Notifica√ß√£o
```json
{
  "notificationPhone": "5511999999999"
}
```

### 4. Limitar Volume
```json
{
  "sendLimitPerRun": 50,
  "intervalMinSeconds": 30,
  "intervalMaxSeconds": 60
}
```

### 5. Mudar para Mensal
```json
{
  "scheduleType": "MONTHLY",
  "schedule": {
    "dayOfMonth": 15,
    "timeOfDay": "10:00"
  }
}
```

## Observa√ß√µes

<Note>
- Altera√ß√µes no `scheduleType` requerem enviar tamb√©m o objeto `schedule` completo
- Mudan√ßas no agendamento recalculam automaticamente o `nextRunAt`
- A automa√ß√£o precisa pertencer √† empresa do token
- Campos n√£o enviados mant√™m seus valores atuais
</Note>

<Warning>
- N√£o √© poss√≠vel alterar o ID da automa√ß√£o
- Altera√ß√µes em `filters` ou `messageConfig` afetam apenas pr√≥ximas execu√ß√µes
- Se a automa√ß√£o estiver executando, as mudan√ßas s√≥ ter√£o efeito na pr√≥xima execu√ß√£o
</Warning>


