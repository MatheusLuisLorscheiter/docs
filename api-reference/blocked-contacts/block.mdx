---
title: 'Bloquear Contato'
api: 'POST /api/companies/{companyId}/blocked-contacts'
description: 'Adiciona um número de telefone à lista de contatos bloqueados'
---

<Note>
  Contatos bloqueados são automaticamente excluídos de todas as campanhas futuras da empresa.
</Note>

## Headers

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

<ParamField header="Content-Type" type="string" required>
  application/json
</ParamField>

## Path Parameters

<ParamField path="companyId" type="number" required>
  ID da empresa (deve corresponder ao token)
</ParamField>

## Body

<ParamField body="phoneNumber" type="string" required>
  Número de telefone a ser bloqueado
  
  <Note>
    O número pode ser fornecido em qualquer formato. A API realizará a normalização automaticamente.
  </Note>
</ParamField>

<ParamField body="reason" type="string" optional>
  Motivo do bloqueio (recomendado para auditoria)
  
  Exemplos:
  - "Solicitação do cliente"
  - "Número inválido/inexistente"
  - "Reclamação no SAC"
  - "Lista de opt-out LGPD"
</ParamField>

<RequestExample>

```bash cURL
curl -X POST https://api.disparador.com/api/companies/1/blocked-contacts \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: seu-access-token" \
  -d '{
    "phoneNumber": "5511999887766",
    "reason": "Solicitação do cliente"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.disparador.com/api/companies/1/blocked-contacts', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Token': 'seu-access-token'
  },
  body: JSON.stringify({
    phoneNumber: '5511999887766',
    reason: 'Solicitação do cliente'
  })
});

const data = await response.json();
if (data.success) {
  console.log('Contato bloqueado com sucesso!');
} else {
  console.error('Erro:', data.message);
}
```

```python Python
import requests

url = "https://api.disparador.com/api/companies/1/blocked-contacts"
headers = {
    'Content-Type': 'application/json',
    'X-Access-Token': 'seu-access-token'
}
payload = {
    'phoneNumber': '5511999887766',
    'reason': 'Solicitação do cliente'
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()

if data['success']:
    print('Contato bloqueado com sucesso!')
else:
    print(f'Erro: {data["message"]}')
```

```php PHP
<?php
$url = 'https://api.disparador.com/api/companies/1/blocked-contacts';
$data = [
    'phoneNumber' => '5511999887766',
    'reason' => 'Solicitação do cliente'
];

$options = [
    'http' => [
        'header' => "Content-Type: application/json\r\n" .
                   "X-Access-Token: seu-access-token\r\n",
        'method' => 'POST',
        'content' => json_encode($data)
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$response = json_decode($result, true);

if ($response['success']) {
    echo 'Contato bloqueado com sucesso!';
} else {
    echo 'Erro: ' . $response['message'];
}
?>
```

</RequestExample>

## Response

<ResponseField name="success" type="boolean">
  Indica se a operação foi bem-sucedida
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de sucesso ou erro
</ResponseField>

<ResponseField name="data" type="object">
  Dados do contato bloqueado (quando sucesso)
  
  <Expandable title="Campos do objeto data">
    <ResponseField name="id" type="number">
      ID do registro de bloqueio
    </ResponseField>
    
    <ResponseField name="phoneNumber" type="string">
      Número de telefone normalizado
    </ResponseField>
    
    <ResponseField name="formattedPhoneNumber" type="string">
      Número de telefone formatado para exibição
    </ResponseField>
    
    <ResponseField name="reason" type="string">
      Motivo do bloqueio
    </ResponseField>
    
    <ResponseField name="blockedAt" type="string">
      Data e hora do bloqueio (ISO 8601)
    </ResponseField>
    
    <ResponseField name="blockedBy" type="string">
      Email do usuário que realizou o bloqueio
    </ResponseField>
    
    <ResponseField name="isActive" type="boolean">
      Status do bloqueio (sempre true para novos bloqueios)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseExample>

```json 200 - Sucesso
{
  "success": true,
  "message": "Contato bloqueado com sucesso",
  "data": {
    "id": 123,
    "phoneNumber": "5511999887766",
    "formattedPhoneNumber": "+55 11 99988-7766",
    "reason": "Solicitação do cliente",
    "blockedAt": "2024-01-20T14:30:00",
    "blockedBy": "admin@empresa.com",
    "isActive": true
  }
}
```

```json 400 - Número Inválido
{
  "success": false,
  "message": "Número de telefone inválido",
  "data": null
}
```

```json 400 - Já Bloqueado
{
  "success": false,
  "message": "Este número já está bloqueado",
  "data": null
}
```

```json 401 - Token Inválido
{
  "error": "Token inválido ou sem permissão"
}
```

```json 500 - Erro Interno
{
  "error": "Erro ao bloquear contato"
}
```

</ResponseExample>

## Validações

<Warning>
- O número deve ser um telefone válido (mínimo 8 dígitos)
- Números já bloqueados retornarão erro
- O motivo do bloqueio não pode exceder 500 caracteres
- O token deve ter permissão para a empresa especificada
</Warning>

## Formatação de Números

A API aceita números em diversos formatos:

```javascript
// Todos estes formatos são aceitos:
"5511999887766"
"+5511999887766"
"55 11 99988-7766"
"(11) 99988-7766"
"+55 (11) 99988-7766"
"11999887766"  // Assumirá código do país +55
```

## Auditoria

<Note>
Todos os bloqueios são registrados com:
- **Data e hora** exata do bloqueio
- **Usuário** que realizou a ação (baseado no token)
- **Motivo** fornecido (quando disponível)

Estas informações são importantes para conformidade com LGPD e outras regulamentações.
</Note>
