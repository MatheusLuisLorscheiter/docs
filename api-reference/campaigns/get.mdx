---
title: 'Consultar Campanha'
description: 'Obtém informações detalhadas de uma campanha específica'
---

# Consultar Campanha

Retorna informações detalhadas de uma campanha específica da empresa autenticada.

<Note>
  Você precisa de um access token válido no header `X-Access-Token` para usar este endpoint.
</Note>

## Endpoint

```http
GET /api/campaigns/{id}
```

## Parâmetros da URL

<ParamField body="id" type="number" required={true}>
  ID único da campanha que deseja consultar.
</ParamField>

## Headers

| Header | Tipo | Obrigatório | Descrição |
|--------|------|-------------|-----------|
| `X-Access-Token` | string | Sim | Token de acesso obtido no registro |

## Exemplo de Request

```bash
curl -X GET https://api.disparador.com/api/campaigns/1 \
  -H "X-Access-Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

## Response

### Sucesso (200 OK)

```json
{
  "id": 1,
  "name": "Campanha de Boas-vindas",
  "status": "ACTIVE",
  "totalContacts": 2,
  "sentMessages": 2,
  "failedMessages": 0,
  "createdAt": "2024-01-15T10:30:00",
  "updatedAt": "2024-01-15T10:35:00",
  "scheduledFor": null,
  "evolutionUrl": "https://sua-evolution-api.com",
  "evolutionInstance": "minha-instancia",
  "message": null
}
```

### Erro (400 Bad Request)

```json
{
  "id": null,
  "name": null,
  "status": null,
  "totalContacts": 0,
  "sentMessages": 0,
  "failedMessages": 0,
  "message": "Campanha não encontrada"
}
```

## Campos da Resposta

| Campo | Tipo | Descrição |
|-------|------|-----------|
| `id` | number | ID único da campanha |
| `name` | string | Nome da campanha |
| `status` | string | Status atual: ACTIVE, PAUSED, CANCELLED, COMPLETED |
| `totalContacts` | number | Total de contatos na campanha |
| `sentMessages` | number | Mensagens enviadas com sucesso |
| `failedMessages` | number | Mensagens que falharam |
| `createdAt` | datetime | Data e hora de criação |
| `updatedAt` | datetime | Data e hora da última atualização |
| `scheduledFor` | datetime | Data e hora agendada (null se execução imediata) |
| `evolutionUrl` | string | URL da Evolution API usada |
| `evolutionInstance` | string | Instância do WhatsApp usada |
| `message` | string | Mensagem de erro (null em caso de sucesso) |

## Status das Campanhas

| Status | Descrição |
|--------|-----------|
| `ACTIVE` | Campanha ativa e enviando mensagens |
| `PAUSED` | Campanha pausada temporariamente |
| `CANCELLED` | Campanha cancelada |
| `COMPLETED` | Campanha finalizada (todas as mensagens processadas) |

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| `400` | Access token inválido ou campanha não encontrada |
| `500` | Erro interno do servidor |

## Exemplos de Uso

### JavaScript

```javascript
const campaignId = 1;
const response = await fetch(`https://api.disparador.com/api/campaigns/${campaignId}`, {
  method: 'GET',
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const campaign = await response.json();
console.log('Campanha:', campaign);
```

### Python

```python
import requests

campaign_id = 1
headers = {
    'X-Access-Token': 'seu-access-token'
}

response = requests.get(f'https://api.disparador.com/api/campaigns/{campaign_id}', headers=headers)
campaign = response.json()
print('Campanha:', campaign)
```

### PHP

```php
$campaign_id = 1;
$headers = [
    'X-Access-Token: seu-access-token'
];

$response = file_get_contents("https://api.disparador.com/api/campaigns/{$campaign_id}", false, stream_context_create([
    'http' => [
        'method' => 'GET',
        'header' => implode("\r\n", $headers)
    ]
]));

$campaign = json_decode($response, true);
echo 'Campanha: ' . print_r($campaign, true);
```

## Monitoramento de Progresso

Use este endpoint para monitorar o progresso de uma campanha:

```javascript
// Verificar progresso a cada 30 segundos
setInterval(async () => {
  const response = await fetch(`https://api.disparador.com/api/campaigns/${campaignId}`, {
    headers: { 'X-Access-Token': token }
  });
  
  const campaign = await response.json();
  
  console.log(`Progresso: ${campaign.sentMessages}/${campaign.totalContacts} mensagens enviadas`);
  
  if (campaign.status === 'COMPLETED') {
    console.log('Campanha finalizada!');
    clearInterval(interval);
  }
}, 30000);
```

## Próximos Passos

Após consultar a campanha:

1. [Pausar Campanha](/api-reference/campaigns/pause) - Pause a campanha
2. [Retomar Campanha](/api-reference/campaigns/resume) - Retome uma campanha pausada
3. [Cancelar Campanha](/api-reference/campaigns/cancel) - Cancele a campanha
4. [Listar Campanhas](/api-reference/campaigns/list) - Veja todas as campanhas 