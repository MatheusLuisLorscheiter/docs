---
title: "Duplicar Campanha"
api: "POST /api/campaigns/{id}/duplicate"
description: "Duplica uma campanha existente com todas as suas configura√ß√µes"
---

## Vis√£o Geral

Este endpoint permite duplicar uma campanha existente, criando uma nova campanha com:
- Todas as configura√ß√µes da campanha original
- Lista de contatos completa
- Mensagens e templates configurados
- Status inicial como **DRAFT** (rascunho)

A campanha duplicada receber√° o sufixo " (c√≥pia)" no nome.

## Requisitos

- Token de acesso v√°lido
- ID da campanha a ser duplicada
- A campanha deve pertencer √† empresa do usu√°rio

## Par√¢metros

<ParamField path="id" type="number" required>
  ID da campanha a ser duplicada
</ParamField>

## Cabe√ßalhos

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Exemplos de Uso

### cURL
```bash
curl -X POST https://api.disparador.com/api/campaigns/123/duplicate \
  -H "X-Access-Token: seu_token_aqui"
```

### JavaScript
```javascript
const response = await fetch('https://api.disparador.com/api/campaigns/123/duplicate', {
  method: 'POST',
  headers: {
    'X-Access-Token': 'seu_token_aqui'
  }
});

const duplicatedCampaign = await response.json();
console.log('Nova campanha:', duplicatedCampaign.name);
console.log('ID:', duplicatedCampaign.id);
console.log('Status:', duplicatedCampaign.status);
```

### Python
```python
import requests

url = "https://api.disparador.com/api/campaigns/123/duplicate"
headers = {
    "X-Access-Token": "seu_token_aqui"
}

response = requests.post(url, headers=headers)
campaign = response.json()
print(f"Campanha duplicada: {campaign['name']}")
print(f"Nova ID: {campaign['id']}")
```

### PHP
```php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.disparador.com/api/campaigns/123/duplicate");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'X-Access-Token: seu_token_aqui'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$campaign = json_decode($response, true);
echo "Campanha duplicada: " . $campaign['name'];
```

## Resposta

### Sucesso (200 OK)

A resposta segue a mesma estrutura completa do endpoint de criar/consultar campanhas:

### Campos Principais

<ResponseField name="id" type="number">
  ID da nova campanha criada
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha (original + " (c√≥pia)")
</ResponseField>

<ResponseField name="description" type="string">
  Descri√ß√£o da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Status da campanha (sempre "DRAFT")
</ResponseField>

<ResponseField name="type" type="string">
  Tipo da campanha (TEXT, MEDIA, POLL)
</ResponseField>

<ResponseField name="createdAt" type="string">
  Data/hora de cria√ß√£o da nova campanha
</ResponseField>

### Estat√≠sticas

<ResponseField name="totalContacts" type="number">
  Total de contatos duplicados
</ResponseField>

<ResponseField name="sentContacts" type="number">
  Sempre 0 (nova campanha)
</ResponseField>

<ResponseField name="failedContacts" type="number">
  Sempre 0 (nova campanha)
</ResponseField>

<ResponseField name="pendingContacts" type="number">
  Igual ao totalContacts
</ResponseField>

<ResponseField name="progressPercentage" type="number">
  Sempre 0 (nova campanha)
</ResponseField>

<ResponseField name="successRate" type="number">
  Sempre 0 (nova campanha)
</ResponseField>

### Dados da Campanha

<ResponseField name="messageContent" type="string">
  Conte√∫do da mensagem principal
</ResponseField>

<ResponseField name="mediaType" type="string">
  Tipo de m√≠dia (image, video, audio, document)
</ResponseField>

<ResponseField name="mediaUrl" type="string">
  URL da m√≠dia anexada (se houver)
</ResponseField>

<ResponseField name="fileName" type="string">
  Nome do arquivo de m√≠dia
</ResponseField>

<ResponseField name="evolutionInstance" type="string">
  Inst√¢ncia Evolution configurada
</ResponseField>

<ResponseField name="minInterval" type="number">
  Intervalo m√≠nimo entre mensagens
</ResponseField>

<ResponseField name="maxInterval" type="number">
  Intervalo m√°ximo entre mensagens
</ResponseField>

<ResponseField name="notificationPhone" type="string">
  Telefone para notifica√ß√£o
</ResponseField>

<ResponseField name="pollData" type="object">
  Dados da enquete (se for campanha de enquete)
</ResponseField>

<ResponseField name="evolutionConfig" type="object">
  Configura√ß√£o Evolution completa
</ResponseField>

### Exemplos de Resposta

#### Campanha de Texto
```json
{
  "id": 456,
  "name": "Promo√ß√£o Black Friday (c√≥pia)",
  "description": null,
  "status": "DRAFT",
  "type": "TEXT",
  "createdAt": "2024-01-20T16:00:00",
  "scheduledFor": null,
  "startedAt": null,
  "completedAt": null,
  "pausedAt": null,
  "totalContacts": 150,
  "sentContacts": 0,
  "failedContacts": 0,
  "pendingContacts": 150,
  "progressPercentage": 0,
  "successRate": 0,
  "estimatedCompletion": null,
  "messageContent": "üéâ Black Friday chegou! Descontos de at√© 70%!",
  "mediaType": null,
  "mediaUrl": null,
  "fileName": null,
  "evolutionInstance": "whatsapp-01",
  "minInterval": 5,
  "maxInterval": 10,
  "notificationPhone": null,
  "pollData": null,
  "evolutionConfig": {
    "id": 1,
    "name": "WhatsApp Principal",
    "url": "https://evolution-api.exemplo.com",
    "instance": "whatsapp-01"
  }
}
```

#### Campanha com M√≠dia
```json
{
  "id": 457,
  "name": "Lan√ßamento Produto (c√≥pia)",
  "description": null,
  "status": "DRAFT",
  "type": "MEDIA",
  "createdAt": "2024-01-20T16:00:00",
  "scheduledFor": null,
  "startedAt": null,
  "completedAt": null,
  "pausedAt": null,
  "totalContacts": 200,
  "sentContacts": 0,
  "failedContacts": 0,
  "pendingContacts": 200,
  "progressPercentage": 0,
  "successRate": 0,
  "estimatedCompletion": null,
  "messageContent": "Conhe√ßa nosso novo produto!",
  "mediaType": "image",
  "mediaUrl": "https://api.disparador.com/media/files/produto.jpg",
  "fileName": "produto.jpg",
  "evolutionInstance": "whatsapp-01",
  "minInterval": 5,
  "maxInterval": 10,
  "notificationPhone": null,
  "pollData": null,
  "evolutionConfig": {
    "id": 1,
    "name": "WhatsApp Principal",
    "url": "https://evolution-api.exemplo.com",
    "instance": "whatsapp-01"
  }
}
```

#### Campanha de Enquete
```json
{
  "id": 458,
  "name": "Pesquisa Satisfa√ß√£o (c√≥pia)",
  "description": null,
  "status": "DRAFT",
  "type": "POLL",
  "createdAt": "2024-01-20T16:00:00",
  "scheduledFor": null,
  "startedAt": null,
  "completedAt": null,
  "pausedAt": null,
  "totalContacts": 100,
  "sentContacts": 0,
  "failedContacts": 0,
  "pendingContacts": 100,
  "progressPercentage": 0,
  "successRate": 0,
  "estimatedCompletion": null,
  "messageContent": null,
  "mediaType": null,
  "mediaUrl": null,
  "fileName": null,
  "evolutionInstance": "whatsapp-01",
  "minInterval": 5,
  "maxInterval": 10,
  "notificationPhone": null,
  "pollData": {
    "name": "Como voc√™ avalia nosso atendimento?",
    "options": ["Excelente", "Bom", "Regular", "Ruim"],
    "selectableCount": 1
  },
  "evolutionConfig": {
    "id": 1,
    "name": "WhatsApp Principal",
    "url": "https://evolution-api.exemplo.com",
    "instance": "whatsapp-01"
  }
}
```

## Erros Comuns

### 400 Bad Request
```json
{
  "message": "Campanha n√£o encontrada"
}
```

### 403 Forbidden
```json
{
  "message": "Acesso negado"
}
```

### 401 Unauthorized
```json
{
  "message": "Access token inv√°lido"
}
```

### 500 Internal Server Error
```json
{
  "message": "Erro ao duplicar campanha: [detalhes do erro]"
}
```

## Observa√ß√µes Importantes

<Note>
  **Comportamento da Duplica√ß√£o:**
  - A nova campanha sempre inicia com status DRAFT
  - Todos os contadores s√£o zerados (mensagens enviadas, falhas, etc.)
  - Os contatos s√£o copiados integralmente
  - As configura√ß√µes de Evolution API s√£o mantidas
  - O hist√≥rico de execu√ß√£o n√£o √© copiado
</Note>

<Warning>
  **Limites:**
  - Campanhas muito grandes podem demorar alguns segundos para duplicar
  - Verifique se h√° espa√ßo suficiente para duplicar campanhas com muitos contatos
  - A duplica√ß√£o n√£o copia notifica√ß√µes j√° enviadas
</Warning>

## Use Cases

### 1. Reutilizar Campanhas Sazonais
```javascript
// Duplicar campanha de Natal do ano anterior
const lastYearCampaign = await getCampaign('natal-2023');
const newCampaign = await duplicateCampaign(lastYearCampaign.id);

// Atualizar mensagem e agendar
await updateCampaign(newCampaign.id, {
  name: 'Natal 2024',
  message: 'Feliz Natal 2024! üéÑ',
  scheduledFor: '2024-12-24T09:00:00',
  isDraft: false
});
```

### 2. Criar Varia√ß√µes de Teste A/B
```javascript
// Duplicar campanha para teste A/B
const originalId = 123;
const variantA = await duplicateCampaign(originalId);
const variantB = await duplicateCampaign(originalId);

// Modificar mensagens para teste
await updateCampaign(variantA.id, { 
  name: 'Teste A - Emoji',
  message: 'üòç Oferta Especial!',
  isDraft: true
});

await updateCampaign(variantB.id, { 
  name: 'Teste B - Urg√™ncia',
  message: '√öLTIMAS HORAS! Oferta Especial!',
  isDraft: true
});
```

### 3. Templates de Campanha
```javascript
// Usar campanha como template
const templateId = 789; // Campanha modelo
const campaigns = [];

for (const region of ['SP', 'RJ', 'MG']) {
  const camp = await duplicateCampaign(templateId);
  await updateCampaign(camp.id, {
    name: `Promo√ß√£o ${region}`,
    contacts: await getContactsByRegion(region),
    isDraft: true
  });
  campaigns.push(camp);
}
```