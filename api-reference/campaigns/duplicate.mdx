---
title: "Duplicar Campanha"
api: "POST /api/campaigns/{id}/duplicate"
description: "Duplica uma campanha existente com todas as suas configura√ß√µes"
---

## Vis√£o Geral

Este endpoint permite duplicar uma campanha existente, criando uma nova campanha com:
- Todas as configura√ß√µes da campanha original
- Lista de contatos completa
- Mensagens e templates configurados
- Status inicial como **DRAFT** (rascunho)

A campanha duplicada receber√° o sufixo " copy" no nome.

## Requisitos

- Token de acesso v√°lido
- ID da campanha a ser duplicada
- A campanha deve pertencer √† empresa do usu√°rio

## Par√¢metros

<ParamField path="id" type="number" required>
  ID da campanha a ser duplicada
</ParamField>

## Cabe√ßalhos

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Exemplos de Uso

### cURL
```bash
curl -X POST https://api.disparador.com/api/campaigns/123/duplicate \
  -H "X-Access-Token: seu_token_aqui"
```

### JavaScript
```javascript
const response = await fetch('https://api.disparador.com/api/campaigns/123/duplicate', {
  method: 'POST',
  headers: {
    'X-Access-Token': 'seu_token_aqui'
  }
});

const duplicatedCampaign = await response.json();
console.log('Nova campanha:', duplicatedCampaign.name);
```

### Python
```python
import requests

url = "https://api.disparador.com/api/campaigns/123/duplicate"
headers = {
    "X-Access-Token": "seu_token_aqui"
}

response = requests.post(url, headers=headers)
campaign = response.json()
print(f"Campanha duplicada: {campaign['name']}")
```

### PHP
```php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.disparador.com/api/campaigns/123/duplicate");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'X-Access-Token: seu_token_aqui'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$campaign = json_decode($response, true);
echo "Campanha duplicada: " . $campaign['name'];
```

## Resposta

### Sucesso (200 OK)

<ResponseField name="id" type="number">
  ID da nova campanha criada
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha (original + " copy")
</ResponseField>

<ResponseField name="description" type="string">
  Descri√ß√£o da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Status da campanha (sempre "DRAFT")
</ResponseField>

<ResponseField name="type" type="string">
  Tipo da campanha (IMMEDIATE ou SCHEDULED)
</ResponseField>

<ResponseField name="totalContacts" type="number">
  Total de contatos duplicados
</ResponseField>

<ResponseField name="messageContent" type="string">
  Conte√∫do da mensagem principal
</ResponseField>

<ResponseField name="mediaType" type="string">
  Tipo de m√≠dia (text, image, video, audio, document, poll)
</ResponseField>

<ResponseField name="mediaUrl" type="string">
  URL da m√≠dia anexada (se houver)
</ResponseField>

<ResponseField name="pollData" type="object">
  Dados da enquete (se for campanha de enquete)
</ResponseField>

### Exemplos de Resposta

#### Campanha de Texto
```json
{
  "id": 456,
  "name": "Promo√ß√£o Black Friday copy",
  "description": "Campanha promocional",
  "status": "DRAFT",
  "type": "IMMEDIATE",
  "totalContacts": 150,
  "messageContent": "üéâ Black Friday chegou! Descontos de at√© 70%!",
  "mediaType": "text",
  "createdAt": "2024-01-20T16:00:00"
}
```

#### Campanha com M√≠dia
```json
{
  "id": 457,
  "name": "Lan√ßamento Produto copy",
  "status": "DRAFT",
  "type": "SCHEDULED",
  "totalContacts": 200,
  "messageContent": "Conhe√ßa nosso novo produto!",
  "mediaType": "image",
  "mediaUrl": "https://api.disparador.com/media/files/produto.jpg",
  "fileName": "produto.jpg"
}
```

#### Campanha de Enquete
```json
{
  "id": 458,
  "name": "Pesquisa Satisfa√ß√£o copy",
  "status": "DRAFT",
  "totalContacts": 100,
  "mediaType": "poll",
  "pollData": {
    "name": "Como voc√™ avalia nosso atendimento?",
    "options": ["Excelente", "Bom", "Regular", "Ruim"],
    "selectableCount": 1
  }
}
```

## Erros Comuns

### 400 Bad Request
```json
{
  "message": "Campanha n√£o encontrada"
}
```

### 403 Forbidden
```json
{
  "message": "Campanha n√£o pertence √† sua empresa"
}
```

### 401 Unauthorized
```json
{
  "message": "Access token inv√°lido"
}
```

### 500 Internal Server Error
```json
{
  "message": "Erro ao duplicar campanha: [detalhes do erro]"
}
```

## Observa√ß√µes Importantes

<Note>
  **Comportamento da Duplica√ß√£o:**
  - A nova campanha sempre inicia com status DRAFT
  - Todos os contadores s√£o zerados (mensagens enviadas, falhas, etc.)
  - As mensagens template s√£o copiadas, mas n√£o as mensagens individuais j√° enviadas
  - O hist√≥rico de execu√ß√£o n√£o √© copiado
</Note>

<Warning>
  **Limites:**
  - Campanhas muito grandes podem demorar alguns segundos para duplicar
  - Verifique se h√° espa√ßo suficiente para duplicar campanhas com muitos contatos
  - A duplica√ß√£o n√£o copia notifica√ß√µes j√° enviadas
</Warning>

## Use Cases

### 1. Reutilizar Campanhas Sazonais
```javascript
// Duplicar campanha de Natal do ano anterior
const lastYearCampaign = await getCampaign('natal-2023');
const newCampaign = await duplicateCampaign(lastYearCampaign.id);

// Atualizar mensagem e agendar
await updateCampaign(newCampaign.id, {
  name: 'Natal 2024',
  message: 'Feliz Natal 2024! üéÑ',
  scheduledFor: '2024-12-24T09:00:00'
});
```

### 2. Criar Varia√ß√µes de Teste A/B
```javascript
// Duplicar campanha para teste A/B
const originalId = 123;
const variantA = await duplicateCampaign(originalId);
const variantB = await duplicateCampaign(originalId);

// Modificar mensagens para teste
await updateCampaign(variantA.id, { 
  name: 'Teste A - Emoji',
  message: 'üòç Oferta Especial!' 
});

await updateCampaign(variantB.id, { 
  name: 'Teste B - Urg√™ncia',
  message: '√öLTIMAS HORAS! Oferta Especial!' 
});
```

### 3. Templates de Campanha
```javascript
// Usar campanha como template
const templateId = 789; // Campanha modelo
const campaigns = [];

for (const region of ['SP', 'RJ', 'MG']) {
  const camp = await duplicateCampaign(templateId);
  await updateCampaign(camp.id, {
    name: `Promo√ß√£o ${region}`,
    contacts: await getContactsByRegion(region)
  });
  campaigns.push(camp);
}
```