---
title: "Retomar Campanha"
api: "PUT /api/campaigns/{id}/resume"
description: "Retoma uma campanha pausada, continuando o envio de onde parou"
---

<Tip>
Retoma o envio de mensagens de uma campanha que foi pausada anteriormente.
</Tip>

## Headers

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Path Parameters

<ParamField path="id" type="number" required>
  ID da campanha a ser retomada
</ParamField>

<RequestExample>

```bash cURL
curl -X PUT https://api.disparador.com/api/campaigns/123/resume \
  -H "X-Access-Token: seu-access-token"
```

```javascript JavaScript
const campaignId = 123;
const response = await fetch(`https://api.disparador.com/api/campaigns/${campaignId}/resume`, {
  method: 'PUT',
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const result = await response.json();

if (result.id) {
  console.log(`Campanha ${result.name} retomada com sucesso!`);
  console.log(`Status atual: ${result.status}`);
  console.log(`Mensagens restantes: ${result.totalContacts - result.sentCount}`);
} else {
  console.error('Erro:', result.message);
}
```

```python Python
import requests

campaign_id = 123
url = f"https://api.disparador.com/api/campaigns/{campaign_id}/resume"
headers = {
    'X-Access-Token': 'seu-access-token'
}

response = requests.put(url, headers=headers)
result = response.json()

if 'id' in result:
    print(f"Campanha '{result['name']}' retomada com sucesso!")
    print(f"Status: {result['status']}")
    remaining = result['totalContacts'] - result['sentCount']
    print(f"Mensagens restantes: {remaining}")
else:
    print(f"Erro: {result.get('message')}")
```

```php PHP
<?php
$campaignId = 123;
$url = "https://api.disparador.com/api/campaigns/{$campaignId}/resume";

$options = [
    'http' => [
        'header' => "X-Access-Token: seu-access-token\r\n",
        'method' => 'PUT'
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$response = json_decode($result, true);

if (isset($response['id'])) {
    echo "Campanha '{$response['name']}' retomada com sucesso!\n";
    echo "Status: {$response['status']}\n";
    $remaining = $response['totalContacts'] - $response['sentCount'];
    echo "Mensagens restantes: {$remaining}\n";
} else {
    echo "Erro: " . $response['message'] . "\n";
}
?>
```

</RequestExample>

## Response

Retorna os dados atualizados da campanha após retomar.

<ResponseField name="id" type="number">
  ID da campanha
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Novo status (será "ACTIVE")
</ResponseField>

<ResponseField name="totalContacts" type="number">
  Total de contatos na campanha
</ResponseField>

<ResponseField name="sentCount" type="number">
  Mensagens já enviadas
</ResponseField>

<ResponseField name="failedCount" type="number">
  Mensagens que falharam
</ResponseField>

<ResponseField name="resumedAt" type="string">
  Data/hora em que foi retomada
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de erro (apenas em caso de falha)
</ResponseField>

<ResponseExample>

```json 200 - Sucesso
{
  "id": 123,
  "name": "Campanha de Vendas",
  "status": "ACTIVE",
  "companyId": 1,
  "totalContacts": 500,
  "sentCount": 234,
  "failedCount": 5,
  "resumedAt": "2024-01-20T16:00:00",
  "message": null
}
```

```json 400 - Campanha Não Pode Ser Retomada
{
  "message": "Apenas campanhas pausadas podem ser retomadas"
}
```

```json 400 - Campanha Não Encontrada
{
  "message": "Campanha não encontrada ou não pertence à sua empresa"
}
```

```json 400 - Token Inválido
{
  "message": "Access token inválido"
}
```

</ResponseExample>

## Regras de Negócio

<Warning>
- Apenas campanhas com status `PAUSED` podem ser retomadas
- A campanha continua exatamente de onde parou
- Mensagens já enviadas não são reenviadas
- O intervalo entre mensagens é mantido
</Warning>

## Continuação do Envio

Ao retomar uma campanha:

1. **Fila preservada** - Contatos não enviados permanecem na ordem original
2. **Estatísticas mantidas** - Contadores de sucesso/falha continuam
3. **Configurações iguais** - Intervalos e parâmetros são preservados
4. **Sem duplicação** - Sistema garante que não há reenvios

## Exemplo de Gerenciamento

```javascript
// Sistema de pausa/retomada automática por horário
async function manageBusinessHours(campaignId, accessToken) {
  const now = new Date();
  const hour = now.getHours();
  
  // Horário comercial: 9h às 18h
  const isBusinessHour = hour >= 9 && hour < 18;
  
  // Verificar status atual
  const statusResponse = await fetch(
    `https://api.disparador.com/api/campaigns/${campaignId}`,
    {
      headers: { 'X-Access-Token': accessToken }
    }
  );
  
  const campaign = await statusResponse.json();
  
  if (!isBusinessHour && campaign.status === 'ACTIVE') {
    // Pausar fora do horário comercial
    await fetch(
      `https://api.disparador.com/api/campaigns/${campaignId}/pause`,
      {
        method: 'PUT',
        headers: { 'X-Access-Token': accessToken }
      }
    );
    console.log('Campanha pausada - fora do horário comercial');
    
  } else if (isBusinessHour && campaign.status === 'PAUSED') {
    // Retomar no horário comercial
    await fetch(
      `https://api.disparador.com/api/campaigns/${campaignId}/resume`,
      {
        method: 'PUT',
        headers: { 'X-Access-Token': accessToken }
      }
    );
    console.log('Campanha retomada - horário comercial');
  }
}

// Executar a cada 30 minutos
setInterval(() => manageBusinessHours(123, 'seu-token'), 1800000);
```

## Boas Práticas

<CardGroup cols={2}>
  <Card title="Verificar Status" icon="search" color="#3b82f6">
    Sempre verifique o status antes de tentar retomar
  </Card>
  <Card title="Logs e Notificações" icon="bell" color="#8b5cf6">
    Registre quando e por que campanhas foram pausadas/retomadas
  </Card>
  <Card title="Horários Adequados" icon="clock" color="#16a34a">
    Retome campanhas em horários apropriados para melhor engajamento
  </Card>
  <Card title="Monitorar Após Retomar" icon="chart-line" color="#f59e0b">
    Acompanhe métricas para garantir que tudo está funcionando
  </Card>
</CardGroup>