---
title: "Criar Campanha"
api: "POST /api/campaigns"
description: "Cria uma nova campanha com disparo imediato ou agendado"
---

<Tip>
Cria uma nova campanha de disparo de mensagens via WhatsApp. A campanha pode ser executada imediatamente ou agendada para uma data futura.
</Tip>

<Warning>
Você precisa de um access token válido no header X-Access-Token para usar este endpoint.
</Warning>

## Headers

<ParamField header="Content-Type" type="string" required>
  application/json
</ParamField>

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso obtido no registro
</ParamField>

## Body

<ParamField body="name" type="string" required>
  Nome da campanha entre 2 e 100 caracteres
</ParamField>

<ParamField body="evolutionUrl" type="string" required>
  URL completa da sua Evolution API
</ParamField>

<ParamField body="evolutionApiKey" type="string" required>
  API Key da sua Evolution API
</ParamField>

<ParamField body="evolutionInstance" type="string" required>
  Nome da instância do WhatsApp
</ParamField>

<ParamField body="contacts" type="array" required>
  Lista de contatos que receberão a mensagem

  <Expandable title="contacts[]">
    <ParamField body="phoneNumber" type="string" required>
      Número de telefone no formato 5511999999999
    </ParamField>
    <ParamField body="name" type="string">
      Nome do contato para variáveis
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="message" type="string" required>
  Conteúdo da mensagem com suporte a variáveis
</ParamField>

<ParamField body="mediaUrl" type="string">
  URL do arquivo de mídia
</ParamField>

<ParamField body="mediaType" type="string">
  Tipo de mídia: image, video, audio, document
</ParamField>

<ParamField body="caption" type="string">
  Legenda para mídia
</ParamField>

<ParamField body="scheduledFor" type="datetime">
  Data e hora para agendamento (mínimo 5 minutos de antecedência)
</ParamField>

<ParamField body="intervalMinSeconds" type="number">
  Intervalo mínimo entre mensagens em segundos (padrão: 3)
</ParamField>

<ParamField body="intervalMaxSeconds" type="number">
  Intervalo máximo entre mensagens em segundos (padrão: 30)
</ParamField>

<ParamField body="notificationPhone" type="string">
  Número de telefone para receber notificação de conclusão da campanha
</ParamField>

<RequestExample>

```bash cURL
curl -X POST https://{url-key}/api/campaigns \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: {access_token}" \
  -d '{
    "name": "{campaign_name}",
    "evolutionUrl": "{evolution_url}",
    "evolutionApiKey": "{evolution_api_key}",
    "evolutionInstance": "{evolution_instance}",
    "message": "{message_content}",
    "contacts": [
      {
        "phoneNumber": "{phone_number_1}",
        "name": "{contact_name_1}"
      },
      {
        "phoneNumber": "{phone_number_2}",
        "name": "{contact_name_2}"
      }
    ],
    "intervalMinSeconds": 5,
    "intervalMaxSeconds": 15,
    "notificationPhone": "5511888888888"
  }'
```

```javascript JavaScript
const response = await fetch('https://{url-key}/api/campaigns', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Token': '{access_token}'
  },
  body: JSON.stringify({
    name: '{campaign_name}',
    evolutionUrl: '{evolution_url}',
    evolutionApiKey: '{evolution_api_key}',
    evolutionInstance: '{evolution_instance}',
    message: '{message_content}',
    contacts: [
      {
        phoneNumber: '{phone_number}',
        name: '{contact_name}'
      }
    ],
    intervalMinSeconds: 5,
    intervalMaxSeconds: 15,
    notificationPhone: '5511888888888'
  })
});

const result = await response.json();
console.log('Resultado:', result);
```

```python Python
import requests

headers = {
    'Content-Type': 'application/json',
    'X-Access-Token': '{access_token}'
}

data = {
    'name': '{campaign_name}',
    'evolutionUrl': '{evolution_url}',
    'evolutionApiKey': '{evolution_api_key}',
    'evolutionInstance': '{evolution_instance}',
    'message': '{message_content}',
    'contacts': [
        {
            'phoneNumber': '{phone_number}',
            'name': '{contact_name}'
        }
    ],
    'intervalMinSeconds': 5,
    'intervalMaxSeconds': 15,
    'notificationPhone': '5511888888888'
}

response = requests.post(
    'https://{url-key}/api/campaigns',
    headers=headers,
    json=data
)

result = response.json()
print('Resultado:', result)
```

```php PHP
<?php
$headers = [
    'Content-Type: application/json',
    'X-Access-Token: {access_token}'
];

$data = [
    'name' => '{campaign_name}',
    'evolutionUrl' => '{evolution_url}',
    'evolutionApiKey' => '{evolution_api_key}',
    'evolutionInstance' => '{evolution_instance}',
    'message' => '{message_content}',
    'contacts' => [
        [
            'phoneNumber' => '{phone_number}',
            'name' => '{contact_name}'
        ]
    ],
    'intervalMinSeconds' => 5,
    'intervalMaxSeconds' => 15,
    'notificationPhone' => '5511888888888'
];

$curl = curl_init();
curl_setopt_array($curl, [
    CURLOPT_URL => 'https://{url-key}/api/campaigns',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_HTTPHEADER => $headers,
    CURLOPT_POSTFIELDS => json_encode($data)
]);

$response = curl_exec($curl);
curl_close($curl);

$result = json_decode($response, true);
print_r($result);
?>
```

</RequestExample>

<ResponseExample>

```json Sucesso (200 OK)
{
  "id": 1,
  "name": "{campaign_name}",
  "description": null,
  "status": "RUNNING",
  "type": "IMMEDIATE",
  "scheduledFor": null,
  "startedAt": "2024-01-15T10:30:00",
  "completedAt": null,
  "pausedAt": null,
  "totalContacts": 2,
  "sentContacts": 0,
  "failedContacts": 0,
  "pendingContacts": 2,
  "progressPercentage": 0.0,
  "successRate": 0.0,
  "estimatedCompletion": null,
  "message": null
}
```

```json Erro (400 Bad Request)
{
  "id": null,
  "name": null,
  "description": null,
  "status": null,
  "type": null,
  "scheduledFor": null,
  "startedAt": null,
  "completedAt": null,
  "pausedAt": null,
  "totalContacts": 0,
  "sentContacts": 0,
  "failedContacts": 0,
  "pendingContacts": 0,
  "progressPercentage": 0.0,
  "successRate": 0.0,
  "estimatedCompletion": null,
  "message": "{error_message}"
}
```

</ResponseExample>

## Response

<ResponseField name="id" type="number">
  ID único da campanha criada
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha
</ResponseField>

<ResponseField name="description" type="string">
  Descrição da campanha (pode ser null)
</ResponseField>

<ResponseField name="status" type="string">
  Status atual: DRAFT, SCHEDULED, RUNNING, PAUSED, COMPLETED, CANCELLED
</ResponseField>

<ResponseField name="type" type="string">
  Tipo da campanha: IMMEDIATE, SCHEDULED
</ResponseField>

<ResponseField name="scheduledFor" type="datetime">
  Data e hora do agendamento (null para campanhas imediatas)
</ResponseField>

<ResponseField name="startedAt" type="datetime">
  Data e hora de início da execução
</ResponseField>

<ResponseField name="completedAt" type="datetime">
  Data e hora de conclusão (null se não finalizada)
</ResponseField>

<ResponseField name="pausedAt" type="datetime">
  Data e hora da pausa (null se não pausada)
</ResponseField>

<ResponseField name="totalContacts" type="number">
  Total de contatos na campanha
</ResponseField>

<ResponseField name="sentContacts" type="number">
  Contatos com mensagens enviadas com sucesso
</ResponseField>

<ResponseField name="failedContacts" type="number">
  Contatos com falha no envio
</ResponseField>

<ResponseField name="pendingContacts" type="number">
  Contatos pendentes de envio
</ResponseField>

<ResponseField name="progressPercentage" type="number">
  Percentual de progresso da campanha (0.0 a 100.0)
</ResponseField>

<ResponseField name="successRate" type="number">
  Taxa de sucesso da campanha (0.0 a 100.0)
</ResponseField>

<ResponseField name="estimatedCompletion" type="datetime">
  Estimativa de conclusão da campanha
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de erro ou null em caso de sucesso
</ResponseField>

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| 400 | Dados inválidos, access token inválido ou erro de validação |
| 401 | Token de acesso não fornecido ou inválido |
| 500 | Erro interno do servidor |

## Variáveis na Mensagem

Você pode usar variáveis na mensagem que serão substituídas pelos dados do contato:

<CardGroup cols={2}>
  <Card title="{{PrimeiroNome}}" icon="user" color="#16a34a">
    Primeiro nome do contato
  </Card>
  <Card title="{{NomeCompleto}}" icon="users" color="#6366f1">
    Nome completo do contato
  </Card>
</CardGroup>

**Exemplos de uso:**

```
Olá {{PrimeiroNome}}! Como você está?
```

```
Prezado(a) {{NomeCompleto}}, temos uma oferta especial para você!
```

## Tipos de Mídia Suportados

| Tipo | Descrição | Extensões |
|------|-----------|-----------|
| **image** | Imagens | jpg, jpeg, png, gif |
| **video** | Vídeos | mp4, avi, mov |
| **audio** | Áudios | mp3, wav, ogg |
| **document** | Documentos | pdf, doc, docx, txt |

## Validações

<CardGroup cols={2}>
  <Card title="Nome da Campanha" icon="text" color="#16a34a">
    Entre 2 e 100 caracteres
  </Card>
  <Card title="URL Evolution" icon="link" color="#6366f1">
    Deve ser uma URL válida
  </Card>
  <Card title="Contatos" icon="users" color="#8b5cf6">
    Mínimo 1 contato na lista
  </Card>
  <Card title="Formato do Telefone" icon="phone" color="#f59e0b">
    Formato: 5511999999999 com código do país
  </Card>
  <Card title="Intervalo de Mensagens" icon="clock" color="#dc2626">
    intervalMaxSeconds deve ser >= intervalMinSeconds
  </Card>
  <Card title="Agendamento" icon="calendar" color="#059669">
    Mínimo 5 minutos de antecedência
  </Card>
</CardGroup>

<Note>
Se o campo `scheduledFor` for fornecido, deve ser uma data futura válida no formato ISO 8601 com pelo menos 5 minutos de antecedência.
</Note>

## Próximos Passos

Após criar sua campanha:

<CardGroup cols={3}>
  <Card title="Consultar Status" icon="magnifying-glass" href="/api-reference/campaigns/get">
    Verifique o progresso da campanha
  </Card>
  <Card title="Listar Campanhas" icon="list" href="/api-reference/campaigns/list">
    Veja todas as campanhas criadas
  </Card>
  <Card title="Pausar Campanha" icon="pause" href="/api-reference/campaigns/pause">
    Interrompa temporariamente o envio
  </Card>
</CardGroup>
