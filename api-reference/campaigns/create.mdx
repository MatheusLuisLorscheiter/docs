---
title: "Criar Campanha"
api: "POST /api/campaigns"
description: "Cria uma nova campanha com disparo imediato ou agendado"
---

<Note>
Cria uma nova campanha de disparo de mensagens via WhatsApp. A campanha pode ser executada imediatamente ou agendada para uma data futura.
</Note>

<Warning>
Você precisa de um access token válido no header X-Access-Token para usar este endpoint.
</Warning>

## Headers

<ParamField header="Content-Type" type="string" required>
  application/json
</ParamField>

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso obtido no registro
</ParamField>

## Body

<ParamField body="name" type="string" required>
  Nome da campanha entre 2 e 100 caracteres
</ParamField>

<ParamField body="evolutionUrl" type="string" required>
  URL completa da sua Evolution API
</ParamField>

<ParamField body="evolutionApiKey" type="string" required>
  API Key da sua Evolution API
</ParamField>

<ParamField body="evolutionInstance" type="string" required>
  Nome da instância do WhatsApp
</ParamField>

<ParamField body="contacts" type="array" required>
  Lista de contatos que receberão a mensagem

  <Expandable title="contacts[]">
    <ParamField body="phoneNumber" type="string" required>
      Número de telefone no formato 5511999999999
    </ParamField>
    <ParamField body="name" type="string">
      Nome do contato para variáveis
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="message" type="string" required>
  Conteúdo da mensagem com suporte a variáveis
</ParamField>

<ParamField body="mediaUrl" type="string">
  URL do arquivo de mídia
</ParamField>

<ParamField body="mediaType" type="string">
  Tipo de mídia: image, video, audio, document
</ParamField>

<ParamField body="caption" type="string">
  Legenda para mídia
</ParamField>

<ParamField body="scheduledFor" type="datetime">
  Data e hora para agendamento
</ParamField>

<RequestExample>

```bash cURL
curl -X POST https://{url-key}/api/campaigns \
  -H "Content-Type: application/json" \
  -H "X-Access-Token: {access_token}" \
  -d '{
    "name": "{campaign_name}",
    "evolutionUrl": "{evolution_url}",
    "evolutionApiKey": "{evolution_api_key}",
    "evolutionInstance": "{evolution_instance}",
    "message": "{message_content}",
    "contacts": [
      {
        "phoneNumber": "{phone_number_1}",
        "name": "{contact_name_1}"
      },
      {
        "phoneNumber": "{phone_number_2}",
        "name": "{contact_name_2}"
      }
    ]
  }'
```

```javascript JavaScript
const response = await fetch('https://{url-key}/api/campaigns', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Token': '{access_token}'
  },
  body: JSON.stringify({
    name: '{campaign_name}',
    evolutionUrl: '{evolution_url}',
    evolutionApiKey: '{evolution_api_key}',
    evolutionInstance: '{evolution_instance}',
    message: '{message_content}',
    contacts: [
      {
        phoneNumber: '{phone_number}',
        name: '{contact_name}'
      }
    ]
  })
});

const result = await response.json();
console.log('Resultado:', result);
```

```python Python
import requests

headers = {
    'Content-Type': 'application/json',
    'X-Access-Token': '{access_token}'
}

data = {
    'name': '{campaign_name}',
    'evolutionUrl': '{evolution_url}',
    'evolutionApiKey': '{evolution_api_key}',
    'evolutionInstance': '{evolution_instance}',
    'message': '{message_content}',
    'contacts': [
        {
            'phoneNumber': '{phone_number}',
            'name': '{contact_name}'
        }
    ]
}

response = requests.post(
    'https://{url-key}/api/campaigns',
    headers=headers,
    json=data
)

result = response.json()
print('Resultado:', result)
```

```php PHP
<?php
$headers = [
    'Content-Type: application/json',
    'X-Access-Token: {access_token}'
];

$data = [
    'name' => '{campaign_name}',
    'evolutionUrl' => '{evolution_url}',
    'evolutionApiKey' => '{evolution_api_key}',
    'evolutionInstance' => '{evolution_instance}',
    'message' => '{message_content}',
    'contacts' => [
        [
            'phoneNumber' => '{phone_number}',
            'name' => '{contact_name}'
        ]
    ]
];

$curl = curl_init();
curl_setopt_array($curl, [
    CURLOPT_URL => 'https://{url-key}/api/campaigns',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_HTTPHEADER => $headers,
    CURLOPT_POSTFIELDS => json_encode($data)
]);

$response = curl_exec($curl);
curl_close($curl);

$result = json_decode($response, true);
print_r($result);
?>
```

</RequestExample>

<ResponseExample>

```json Sucesso (201 Created)
{
  "id": 1,
  "name": "{campaign_name}",
  "status": "ACTIVE",
  "totalContacts": 2,
  "sentMessages": 0,
  "failedMessages": 0,
  "createdAt": "{creation_datetime}",
  "message": null
}
```

```json Erro (400 Bad Request)
{
  "id": null,
  "name": null,
  "status": null,
  "totalContacts": 0,
  "sentMessages": 0,
  "failedMessages": 0,
  "message": "{error_message}"
}
```

</ResponseExample>

## Response

<ResponseField name="id" type="number">
  ID único da campanha criada
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Status atual: ACTIVE, PAUSED, CANCELLED, COMPLETED
</ResponseField>

<ResponseField name="totalContacts" type="number">
  Total de contatos na campanha
</ResponseField>

<ResponseField name="sentMessages" type="number">
  Mensagens enviadas com sucesso
</ResponseField>

<ResponseField name="failedMessages" type="number">
  Mensagens que falharam
</ResponseField>

<ResponseField name="createdAt" type="datetime">
  Data e hora de criação
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de erro ou null em caso de sucesso
</ResponseField>

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| 400 | Dados inválidos, access token inválido ou erro de validação |
| 401 | Token de acesso não fornecido ou inválido |
| 500 | Erro interno do servidor |

## Variáveis na Mensagem

Você pode usar variáveis na mensagem que serão substituídas pelos dados do contato:

<CardGroup cols={2}>
  <Card title="{{name}}" icon="user" color="#16a34a">
    Nome do contato fornecido na lista
  </Card>
  <Card title="{{phoneNumber}}" icon="phone" color="#6366f1">
    Número do telefone do contato
  </Card>
</CardGroup>

**Exemplo de uso:**
```
Olá {{name}}! Seu número é {{phoneNumber}}.
```

## Tipos de Mídia Suportados

| Tipo | Descrição | Extensões |
|------|-----------|-----------|
| **image** | Imagens | jpg, jpeg, png, gif |
| **video** | Vídeos | mp4, avi, mov |
| **audio** | Áudios | mp3, wav, ogg |
| **document** | Documentos | pdf, doc, docx, txt |

## Validações

<CardGroup cols={2}>
  <Card title="Nome da Campanha" icon="text" color="#16a34a">
    Entre 2 e 100 caracteres
  </Card>
  <Card title="URL Evolution" icon="link" color="#6366f1">
    Deve ser uma URL válida
  </Card>
  <Card title="Contatos" icon="users" color="#8b5cf6">
    Mínimo 1 contato na lista
  </Card>
  <Card title="Formato do Telefone" icon="phone" color="#f59e0b">
    Formato: 5511999999999 com código do país
  </Card>
</CardGroup>

<Note>
Se o campo `scheduledFor` for fornecido, deve ser uma data futura válida no formato ISO 8601.
</Note>

## Próximos Passos

Após criar sua campanha:

<CardGroup cols={3}>
  <Card title="Consultar Status" icon="magnifying-glass" href="/api-reference/campaigns/get">
    Verifique o progresso da campanha
  </Card>
  <Card title="Listar Campanhas" icon="list" href="/api-reference/campaigns/list">
    Veja todas as campanhas criadas
  </Card>
  <Card title="Pausar Campanha" icon="pause" href="/api-reference/campaigns/pause">
    Interrompa temporariamente o envio
  </Card>
</CardGroup>