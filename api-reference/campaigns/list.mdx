---
title: "Listar Campanhas"
api: "GET /api/campaigns"
description: "Lista todas as campanhas da empresa com filtro opcional por status"
---

<Tip>
Retorna uma lista de todas as campanhas da empresa autenticada, com opção de filtrar por status.
</Tip>

## Headers

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Query Parameters

<ParamField query="status" type="string" optional>
  Filtra campanhas por status específico
  
  Valores aceitos:
  - `DRAFT` - Rascunhos
  - `SCHEDULED` - Agendadas
  - `ACTIVE` - Em execução
  - `PAUSED` - Pausadas
  - `COMPLETED` - Concluídas
  - `CANCELLED` - Canceladas
  - `FAILED` - Falharam
</ParamField>

<RequestExample>

```bash cURL
# Listar todas as campanhas
curl -X GET https://api.disparador.com/api/campaigns \
  -H "X-Access-Token: seu-access-token"

# Filtrar por status
curl -X GET "https://api.disparador.com/api/campaigns?status=ACTIVE" \
  -H "X-Access-Token: seu-access-token"
```

```javascript JavaScript
// Listar todas as campanhas
const response = await fetch('https://api.disparador.com/api/campaigns', {
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const campaigns = await response.json();
console.log(`Total de campanhas: ${campaigns.length}`);

// Filtrar campanhas ativas
const activeResponse = await fetch('https://api.disparador.com/api/campaigns?status=ACTIVE', {
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const activeCampaigns = await activeResponse.json();
console.log(`Campanhas ativas: ${activeCampaigns.length}`);
```

```python Python
import requests

url = "https://api.disparador.com/api/campaigns"
headers = {
    'X-Access-Token': 'seu-access-token'
}

# Listar todas as campanhas
response = requests.get(url, headers=headers)
campaigns = response.json()

print(f"Total de campanhas: {len(campaigns)}")

# Filtrar por status
params = {'status': 'COMPLETED'}
completed = requests.get(url, headers=headers, params=params)
completed_campaigns = completed.json()

print(f"Campanhas concluídas: {len(completed_campaigns)}")

# Exibir detalhes
for campaign in campaigns:
    print(f"- {campaign['name']} ({campaign['status']})")
```

```php PHP
<?php
$url = 'https://api.disparador.com/api/campaigns';
$headers = [
    'X-Access-Token: seu-access-token'
];

// Listar todas as campanhas
$options = [
    'http' => [
        'header' => implode("\r\n", $headers),
        'method' => 'GET'
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$campaigns = json_decode($result, true);

echo "Total de campanhas: " . count($campaigns) . "\n";

// Filtrar por status
$urlWithStatus = $url . '?status=SCHEDULED';
$resultScheduled = file_get_contents($urlWithStatus, false, $context);
$scheduledCampaigns = json_decode($resultScheduled, true);

echo "Campanhas agendadas: " . count($scheduledCampaigns) . "\n";
?>
```

</RequestExample>

## Response

Array de campanhas, cada uma contendo:

<ResponseField name="id" type="number">
  ID único da campanha
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Status atual da campanha
</ResponseField>

<ResponseField name="companyId" type="number">
  ID da empresa proprietária
</ResponseField>

<ResponseField name="totalContacts" type="number">
  Total de contatos na campanha
</ResponseField>

<ResponseField name="sentCount" type="number">
  Quantidade de mensagens enviadas
</ResponseField>

<ResponseField name="failedCount" type="number">
  Quantidade de envios que falharam
</ResponseField>

<ResponseField name="scheduledFor" type="string">
  Data/hora de agendamento (se aplicável)
</ResponseField>

<ResponseField name="createdAt" type="string">
  Data/hora de criação
</ResponseField>

<ResponseField name="updatedAt" type="string">
  Data/hora da última atualização
</ResponseField>

<ResponseField name="startedAt" type="string">
  Data/hora que iniciou o envio
</ResponseField>

<ResponseField name="completedAt" type="string">
  Data/hora que foi concluída
</ResponseField>

<ResponseExample>

```json 200 - Sucesso (Lista Completa)
[
  {
    "id": 123,
    "name": "Campanha de Natal",
    "status": "COMPLETED",
    "companyId": 1,
    "totalContacts": 150,
    "sentCount": 148,
    "failedCount": 2,
    "scheduledFor": null,
    "createdAt": "2024-01-20T10:00:00",
    "updatedAt": "2024-01-20T11:30:00",
    "startedAt": "2024-01-20T10:01:00",
    "completedAt": "2024-01-20T11:30:00"
  },
  {
    "id": 124,
    "name": "Promoção Black Friday",
    "status": "ACTIVE",
    "companyId": 1,
    "totalContacts": 500,
    "sentCount": 234,
    "failedCount": 5,
    "scheduledFor": null,
    "createdAt": "2024-01-20T14:00:00",
    "updatedAt": "2024-01-20T14:45:00",
    "startedAt": "2024-01-20T14:01:00",
    "completedAt": null
  },
  {
    "id": 125,
    "name": "Lembrete de Consulta",
    "status": "SCHEDULED",
    "companyId": 1,
    "totalContacts": 50,
    "sentCount": 0,
    "failedCount": 0,
    "scheduledFor": "2024-01-25T09:00:00",
    "createdAt": "2024-01-20T15:00:00",
    "updatedAt": "2024-01-20T15:00:00",
    "startedAt": null,
    "completedAt": null
  }
]
```

```json 200 - Sucesso (Filtrado por Status)
[
  {
    "id": 124,
    "name": "Promoção Black Friday",
    "status": "ACTIVE",
    "companyId": 1,
    "totalContacts": 500,
    "sentCount": 234,
    "failedCount": 5,
    "scheduledFor": null,
    "createdAt": "2024-01-20T14:00:00",
    "updatedAt": "2024-01-20T14:45:00",
    "startedAt": "2024-01-20T14:01:00",
    "completedAt": null
  }
]
```

```json 200 - Lista Vazia
[]
```

```json 400 - Token Inválido
{
  "message": "Access token inválido"
}
```

</ResponseExample>

## Endpoint Adicional - Campanhas Ativas

Também existe um endpoint específico para listar apenas campanhas ativas:

```http
GET /api/campaigns/active
```

Este endpoint retorna apenas campanhas com status `ACTIVE`, sem necessidade de passar o parâmetro de filtro.

## Ordenação

As campanhas são retornadas ordenadas por:
1. Data de criação (mais recentes primeiro)
2. Status (ativas primeiro)

## Performance

<Note>
- Este endpoint retorna todas as campanhas sem paginação
- Para grandes volumes, considere implementar filtros adicionais
- Use o filtro de status para reduzir o tamanho da resposta
</Note>

## Exemplo de Dashboard

```javascript
// Função para criar dashboard de campanhas
async function getCampaignStats(accessToken) {
  const response = await fetch('https://api.disparador.com/api/campaigns', {
    headers: { 'X-Access-Token': accessToken }
  });
  
  const campaigns = await response.json();
  
  const stats = {
    total: campaigns.length,
    active: 0,
    scheduled: 0,
    completed: 0,
    totalMessages: 0,
    successRate: 0
  };
  
  campaigns.forEach(campaign => {
    if (campaign.status === 'ACTIVE') stats.active++;
    if (campaign.status === 'SCHEDULED') stats.scheduled++;
    if (campaign.status === 'COMPLETED') stats.completed++;
    
    stats.totalMessages += campaign.sentCount;
    
    if (campaign.totalContacts > 0) {
      stats.successRate += (campaign.sentCount / campaign.totalContacts);
    }
  });
  
  if (stats.completed > 0) {
    stats.successRate = (stats.successRate / stats.completed * 100).toFixed(2);
  }
  
  return stats;
}
```
