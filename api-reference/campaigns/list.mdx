---
title: "Listar Campanhas"
api: "GET /api/campaigns"
description: "Lista todas as campanhas da empresa com filtro opcional por status"
---

<Tip>
Retorna uma lista de todas as campanhas da empresa autenticada, com op√ß√£o de filtrar por status.
</Tip>

## Headers

<ParamField header="X-Access-Token" type="string" required>
  Token de acesso da empresa
</ParamField>

## Query Parameters

<ParamField query="status" type="string" optional>
  Filtra campanhas por status espec√≠fico
  
  Valores aceitos:
  - `DRAFT` - Rascunhos
  - `SCHEDULED` - Agendadas
  - `ACTIVE` - Em execu√ß√£o
  - `PAUSED` - Pausadas
  - `COMPLETED` - Conclu√≠das
  - `CANCELLED` - Canceladas
  - `FAILED` - Falharam
</ParamField>

<RequestExample>

```bash cURL
# Listar todas as campanhas
curl -X GET https://api.disparador.com/api/campaigns \
  -H "X-Access-Token: seu-access-token"

# Filtrar por status
curl -X GET "https://api.disparador.com/api/campaigns?status=ACTIVE" \
  -H "X-Access-Token: seu-access-token"
```

```javascript JavaScript
// Listar todas as campanhas
const response = await fetch('https://api.disparador.com/api/campaigns', {
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const campaigns = await response.json();
console.log(`Total de campanhas: ${campaigns.length}`);

// Filtrar campanhas ativas
const activeResponse = await fetch('https://api.disparador.com/api/campaigns?status=ACTIVE', {
  headers: {
    'X-Access-Token': 'seu-access-token'
  }
});

const activeCampaigns = await activeResponse.json();
console.log(`Campanhas ativas: ${activeCampaigns.length}`);
```

```python Python
import requests

url = "https://api.disparador.com/api/campaigns"
headers = {
    'X-Access-Token': 'seu-access-token'
}

# Listar todas as campanhas
response = requests.get(url, headers=headers)
campaigns = response.json()

print(f"Total de campanhas: {len(campaigns)}")

# Filtrar por status
params = {'status': 'COMPLETED'}
completed = requests.get(url, headers=headers, params=params)
completed_campaigns = completed.json()

print(f"Campanhas conclu√≠das: {len(completed_campaigns)}")

# Exibir detalhes
for campaign in campaigns:
    print(f"- {campaign['name']} ({campaign['status']})")
```

```php PHP
<?php
$url = 'https://api.disparador.com/api/campaigns';
$headers = [
    'X-Access-Token: seu-access-token'
];

// Listar todas as campanhas
$options = [
    'http' => [
        'header' => implode("\r\n", $headers),
        'method' => 'GET'
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$campaigns = json_decode($result, true);

echo "Total de campanhas: " . count($campaigns) . "\n";

// Filtrar por status
$urlWithStatus = $url . '?status=SCHEDULED';
$resultScheduled = file_get_contents($urlWithStatus, false, $context);
$scheduledCampaigns = json_decode($resultScheduled, true);

echo "Campanhas agendadas: " . count($scheduledCampaigns) . "\n";
?>
```

</RequestExample>

## Response

Array de campanhas, cada uma contendo:

### Campos Principais

<ResponseField name="id" type="number">
  ID √∫nico da campanha
</ResponseField>

<ResponseField name="name" type="string">
  Nome da campanha
</ResponseField>

<ResponseField name="description" type="string">
  Descri√ß√£o da campanha
</ResponseField>

<ResponseField name="status" type="string">
  Status atual da campanha
</ResponseField>

<ResponseField name="type" type="string">
  Tipo da campanha (TEXT, MEDIA, POLL)
</ResponseField>

<ResponseField name="createdAt" type="string">
  Data/hora de cria√ß√£o
</ResponseField>

<ResponseField name="scheduledFor" type="string">
  Data/hora de agendamento (se aplic√°vel)
</ResponseField>

<ResponseField name="startedAt" type="string">
  Data/hora que iniciou o envio
</ResponseField>

<ResponseField name="completedAt" type="string">
  Data/hora que foi conclu√≠da
</ResponseField>

<ResponseField name="pausedAt" type="string">
  Data/hora que foi pausada (se aplic√°vel)
</ResponseField>

### Estat√≠sticas

<ResponseField name="totalContacts" type="number">
  Total de contatos na campanha
</ResponseField>

<ResponseField name="sentContacts" type="number">
  Quantidade de mensagens enviadas
</ResponseField>

<ResponseField name="failedContacts" type="number">
  Quantidade de envios que falharam
</ResponseField>

<ResponseField name="pendingContacts" type="number">
  Quantidade de contatos pendentes
</ResponseField>

<ResponseField name="progressPercentage" type="number">
  Percentual de progresso (0-100)
</ResponseField>

<ResponseField name="successRate" type="number">
  Taxa de sucesso em percentual
</ResponseField>

<ResponseField name="estimatedCompletion" type="string">
  Estimativa de conclus√£o (se em execu√ß√£o)
</ResponseField>

### Dados da Campanha

<ResponseField name="messageContent" type="string">
  Conte√∫do da mensagem da campanha
</ResponseField>

<ResponseField name="mediaType" type="string">
  Tipo de m√≠dia anexada (se houver)
</ResponseField>

<ResponseField name="mediaUrl" type="string">
  URL da m√≠dia anexada
</ResponseField>

<ResponseField name="fileName" type="string">
  Nome do arquivo de m√≠dia
</ResponseField>

<ResponseField name="evolutionInstance" type="string">
  Inst√¢ncia Evolution usada
</ResponseField>

<ResponseField name="minInterval" type="number">
  Intervalo m√≠nimo entre mensagens (segundos)
</ResponseField>

<ResponseField name="maxInterval" type="number">
  Intervalo m√°ximo entre mensagens (segundos)
</ResponseField>

<ResponseField name="notificationPhone" type="string">
  Telefone para notifica√ß√£o de conclus√£o
</ResponseField>

<ResponseField name="pollData" type="object">
  Dados da enquete (quando aplic√°vel)
</ResponseField>

<ResponseField name="evolutionConfig" type="object">
  Configura√ß√£o Evolution completa usada
</ResponseField>

<ResponseExample>

```json 200 - Sucesso (Lista Completa)
[
  {
    "id": 123,
    "name": "Campanha de Natal",
    "description": null,
    "status": "COMPLETED",
    "type": "TEXT",
    "createdAt": "2024-01-20T10:00:00",
    "scheduledFor": null,
    "startedAt": "2024-01-20T10:01:00",
    "completedAt": "2024-01-20T11:30:00",
    "pausedAt": null,
    "totalContacts": 150,
    "sentContacts": 148,
    "failedContacts": 2,
    "pendingContacts": 0,
    "progressPercentage": 100,
    "successRate": 98.67,
    "estimatedCompletion": null,
    "messageContent": "Feliz Natal! üéÑ",
    "mediaType": null,
    "mediaUrl": null,
    "fileName": null,
    "evolutionInstance": "whatsapp-01",
    "minInterval": 5,
    "maxInterval": 10,
    "notificationPhone": null,
    "pollData": null,
    "evolutionConfig": {
      "id": 1,
      "name": "WhatsApp Principal",
      "url": "https://evolution-api.exemplo.com",
      "instance": "whatsapp-01"
    }
  },
  {
    "id": 124,
    "name": "Promo√ß√£o Black Friday",
    "description": null,
    "status": "ACTIVE",
    "type": "MEDIA",
    "createdAt": "2024-01-20T14:00:00",
    "scheduledFor": null,
    "startedAt": "2024-01-20T14:01:00",
    "completedAt": null,
    "pausedAt": null,
    "totalContacts": 500,
    "sentContacts": 234,
    "failedContacts": 5,
    "pendingContacts": 261,
    "progressPercentage": 46.8,
    "successRate": 97.91,
    "estimatedCompletion": "2024-01-20T16:30:00",
    "messageContent": "‚ö° Oferta v√°lida apenas hoje!",
    "mediaType": "image",
    "mediaUrl": "https://exemplo.com/black-friday.jpg",
    "fileName": "promo-black-friday.jpg",
    "evolutionInstance": "whatsapp-01",
    "minInterval": 3,
    "maxInterval": 8,
    "notificationPhone": "5511999999999",
    "pollData": null,
    "evolutionConfig": {
      "id": 1,
      "name": "WhatsApp Principal",
      "url": "https://evolution-api.exemplo.com",
      "instance": "whatsapp-01"
    }
  },
  {
    "id": 125,
    "name": "Pesquisa de Satisfa√ß√£o",
    "description": null,
    "status": "SCHEDULED",
    "type": "POLL",
    "createdAt": "2024-01-20T15:00:00",
    "scheduledFor": "2024-01-25T09:00:00",
    "startedAt": null,
    "completedAt": null,
    "pausedAt": null,
    "totalContacts": 50,
    "sentContacts": 0,
    "failedContacts": 0,
    "pendingContacts": 50,
    "progressPercentage": 0,
    "successRate": 0,
    "estimatedCompletion": null,
    "messageContent": null,
    "mediaType": null,
    "mediaUrl": null,
    "fileName": null,
    "evolutionInstance": "whatsapp-01",
    "minInterval": 10,
    "maxInterval": 20,
    "notificationPhone": null,
    "pollData": {
      "name": "Como voc√™ avalia nosso atendimento?",
      "options": ["Excelente", "Bom", "Regular", "Ruim"],
      "selectableCount": 1
    },
    "evolutionConfig": {
      "id": 2,
      "name": "WhatsApp Pesquisas",
      "url": "https://evolution-api.exemplo.com",
      "instance": "whatsapp-02"
    }
  }
]
```

```json 200 - Sucesso (Filtrado por Status)
[
  {
    "id": 124,
    "name": "Promo√ß√£o Black Friday",
    "description": null,
    "status": "ACTIVE",
    "type": "MEDIA",
    "createdAt": "2024-01-20T14:00:00",
    "scheduledFor": null,
    "startedAt": "2024-01-20T14:01:00",
    "completedAt": null,
    "pausedAt": null,
    "totalContacts": 500,
    "sentContacts": 234,
    "failedContacts": 5,
    "pendingContacts": 261,
    "progressPercentage": 46.8,
    "successRate": 97.91,
    "estimatedCompletion": "2024-01-20T16:30:00",
    "messageContent": "‚ö° Oferta v√°lida apenas hoje!",
    "mediaType": "image",
    "mediaUrl": "https://exemplo.com/black-friday.jpg",
    "fileName": "promo-black-friday.jpg",
    "evolutionInstance": "whatsapp-01",
    "minInterval": 3,
    "maxInterval": 8,
    "notificationPhone": "5511999999999",
    "pollData": null,
    "evolutionConfig": {
      "id": 1,
      "name": "WhatsApp Principal",
      "url": "https://evolution-api.exemplo.com",
      "instance": "whatsapp-01"
    }
  }
]
```

```json 200 - Lista Vazia
[]
```

```json 400 - Token Inv√°lido
{
  "message": "Access token inv√°lido"
}
```

</ResponseExample>

## Endpoint Adicional - Campanhas Ativas

Tamb√©m existe um endpoint espec√≠fico para listar apenas campanhas ativas:

```http
GET /api/campaigns/active
```

Este endpoint retorna apenas campanhas com status `ACTIVE`, sem necessidade de passar o par√¢metro de filtro.

## Ordena√ß√£o

As campanhas s√£o retornadas ordenadas por:
1. Data de cria√ß√£o (mais recentes primeiro)
2. Status (ativas primeiro)

## Performance

<Note>
- Este endpoint retorna todas as campanhas sem pagina√ß√£o
- Para grandes volumes, considere implementar filtros adicionais
- Use o filtro de status para reduzir o tamanho da resposta
</Note>

## Exemplo de Dashboard

```javascript
// Fun√ß√£o para criar dashboard de campanhas
async function getCampaignStats(accessToken) {
  const response = await fetch('https://api.disparador.com/api/campaigns', {
    headers: { 'X-Access-Token': accessToken }
  });
  
  const campaigns = await response.json();
  
  const stats = {
    total: campaigns.length,
    active: 0,
    scheduled: 0,
    completed: 0,
    paused: 0,
    totalMessages: 0,
    successRate: 0
  };
  
  campaigns.forEach(campaign => {
    switch(campaign.status) {
      case 'ACTIVE': stats.active++; break;
      case 'SCHEDULED': stats.scheduled++; break;
      case 'COMPLETED': stats.completed++; break;
      case 'PAUSED': stats.paused++; break;
    }
    
    stats.totalMessages += campaign.sentContacts;
    
    if (campaign.totalContacts > 0 && campaign.status === 'COMPLETED') {
      stats.successRate += campaign.successRate;
    }
  });
  
  if (stats.completed > 0) {
    stats.successRate = (stats.successRate / stats.completed).toFixed(2);
  }
  
  return stats;
}
```
