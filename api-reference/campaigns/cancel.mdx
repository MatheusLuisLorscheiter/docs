---
title: "Cancelar Campanha"
description: "Cancela uma campanha permanentemente"
---

# Cancelar Campanha

Cancela uma campanha permanentemente, interrompendo definitivamente o envio de mensagens. Esta ação não pode ser desfeita.

<Note>
Você precisa de um access token válido no header X-Access-Token para usar este endpoint.
</Note>

## Endpoint

```http
PUT /api/campaigns/{id}/cancel
```

## Parâmetros da URL

| Parâmetro | Tipo | Obrigatório | Descrição |
|-----------|------|-------------|-----------|
| id | number | Sim | ID único da campanha que deseja cancelar |

## Headers

| Header | Tipo | Obrigatório | Descrição |
|--------|------|-------------|-----------|
| X-Access-Token | string | Sim | Token de acesso obtido no registro |

## Exemplo de Request

```bash
curl -X PUT https://{url-key}/api/campaigns/{campaign_id}/cancel \
  -H "X-Access-Token: {access_token}"
```

## Response

### Sucesso (200 OK)

```json
{
  "id": 1,
  "name": "{campaign_name}",
  "status": "CANCELLED",
  "totalContacts": 2,
  "sentMessages": 1,
  "failedMessages": 0,
  "createdAt": "{creation_datetime}",
  "message": null
}
```

### Erro (400 Bad Request)

```json
{
  "id": null,
  "name": null,
  "status": null,
  "totalContacts": 0,
  "sentMessages": 0,
  "failedMessages": 0,
  "message": "{error_message}"
}
```

## Campos da Resposta

| Campo | Tipo | Descrição |
|-------|------|-----------|
| id | number | ID único da campanha |
| name | string | Nome da campanha |
| status | string | Status atualizado: CANCELLED |
| totalContacts | number | Total de contatos na campanha |
| sentMessages | number | Mensagens enviadas com sucesso |
| failedMessages | number | Mensagens que falharam |
| createdAt | datetime | Data e hora de criação |
| message | string | Mensagem de erro (null em caso de sucesso) |

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| 400 | Access token inválido, campanha não encontrada ou não pode ser cancelada |
| 500 | Erro interno do servidor |

## Quando uma campanha pode ser cancelada

Uma campanha pode ser cancelada se estiver em qualquer status, exceto CANCELLED e COMPLETED:

- ACTIVE - Pode ser cancelada
- PAUSED - Pode ser cancelada
- CANCELLED - Já foi cancelada
- COMPLETED - Já foi finalizada

## Exemplos de Uso

### JavaScript

```javascript
const campaignId = {campaign_id};
const response = await fetch(`https://{url-key}/api/campaigns/${campaignId}/cancel`, {
  method: 'PUT',
  headers: {
    'X-Access-Token': '{access_token}'
  }
});

const result = await response.json();
console.log('Resultado:', result);
```

### Python

```python
import requests

campaign_id = {campaign_id}
headers = {
    'X-Access-Token': '{access_token}'
}

response = requests.put(
    f'https://{url-key}/api/campaigns/{campaign_id}/cancel',
    headers=headers
)

result = response.json()
print('Resultado:', result)
```

## Próximos Passos

Após cancelar a campanha:

1. Listar Campanhas - Veja todas as campanhas
2. Criar Nova Campanha - Crie uma nova campanha
3. Consultar Status - Verifique o status final