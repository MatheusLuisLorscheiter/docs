---
title: "Registrar Empresa"
api: "POST /api/auth/register"
description: "Registra uma nova empresa com autorização de administrador"
---

<Warning>
Este endpoint requer autenticação de administrador. Você precisa fornecer o token de administrador no header ACCESS_TOKEN.
</Warning>

<Info>
**Novo método de registro disponível!** Empresas também podem ser criadas automaticamente ao contratar um plano através do checkout Stripe. Veja [Contratar Plano](/api-reference/subscriptions/checkout) para mais detalhes.
</Info>

<Note>
Após obter o access token da empresa, use-o no header X-Access-Token em todos os outros endpoints.
</Note>

## Métodos de Registro

Existem duas formas de registrar uma empresa no sistema:

1. **Via Token Admin** (este endpoint) - Para parceiros e integradores com acesso administrativo
2. **Via Contratação de Plano** - Usuários finais podem criar uma conta ao contratar um plano via Stripe

### Diferenças entre os métodos:

| Método | Token Admin | Contratação de Plano |
|--------|-------------|---------------------|
| Requer senha admin | Sim | Não |
| Requer pagamento | Não | Sim |
| Tipo de registro | admin_password | stripe_subscription |
| Acesso ao sistema | Ilimitado | Requer assinatura ativa |

## Headers

<ParamField header="Content-Type" type="string" required>
  Deve ser application/json
</ParamField>

<ParamField header="ACCESS_TOKEN" type="string" required>
  Token de administrador no formato: Bearer {admin_password}
</ParamField>

## Body Parameters

<ParamField body="name" type="string" optional>
  Nome da empresa (máximo 100 caracteres). Se não fornecido, será usado a parte antes do @ do email
</ParamField>

<ParamField body="email" type="string" required>
  Email da empresa. Deve ser um email válido e único no sistema
</ParamField>

<ParamField body="password" type="string" required>
  Senha da empresa. Deve ter pelo menos 6 caracteres
</ParamField>

<RequestExample>

```bash cURL
curl -X POST https://api.disparador.com/api/auth/register \
  -H "Content-Type: application/json" \
  -H "ACCESS_TOKEN: Bearer {admin_password}" \
  -d '{
    "name": "Minha Empresa LTDA",
    "email": "contato@minhaempresa.com",
    "password": "senha123"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.disparador.com/api/auth/register', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'ACCESS_TOKEN': 'Bearer {admin_password}'
  },
  body: JSON.stringify({
    name: 'Minha Empresa LTDA',
    email: 'contato@minhaempresa.com',
    password: 'senha123'
  })
});

const data = await response.json();

if (data.accessToken) {
  console.log('Empresa registrada com sucesso!');
  console.log('Access Token:', data.accessToken);
} else {
  console.error('Erro no registro:', data.message);
}
```

```python Python
import requests

url = "https://api.disparador.com/api/auth/register"
headers = {
    'Content-Type': 'application/json',
    'ACCESS_TOKEN': 'Bearer {admin_password}'
}
payload = {
    "name": "Minha Empresa LTDA",
    "email": "contato@minhaempresa.com",
    "password": "senha123"
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()

if data.get('accessToken'):
    print(f"Empresa registrada! Token: {data['accessToken']}")
else:
    print(f"Erro no registro: {data.get('message')}")
```

```php PHP
<?php
$url = 'https://api.disparador.com/api/auth/register';
$headers = [
    'Content-Type: application/json',
    'ACCESS_TOKEN: Bearer {admin_password}'
];

$data = [
    'name' => 'Minha Empresa LTDA',
    'email' => 'contato@minhaempresa.com',
    'password' => 'senha123'
];

$options = [
    'http' => [
        'header' => implode("\r\n", $headers),
        'method' => 'POST',
        'content' => json_encode($data)
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$response = json_decode($result, true);

if (isset($response['accessToken'])) {
    echo "Empresa registrada! Token: " . $response['accessToken'];
} else {
    echo "Erro no registro: " . $response['message'];
}
?>
```

</RequestExample>

## Response

### Campos Principais

<ResponseField name="accessToken" type="string">
  Token de acesso único da empresa para autenticação
</ResponseField>

<ResponseField name="tokenType" type="string">
  Tipo do token. Sempre retorna "Access"
</ResponseField>

<ResponseField name="companyId" type="number">
  ID único da empresa criada
</ResponseField>

<ResponseField name="companyName" type="string">
  Nome da empresa registrada
</ResponseField>

<ResponseField name="companyEmail" type="string">
  Email da empresa
</ResponseField>

<ResponseField name="expiresAt" type="string" nullable>
  Data de expiração do token. Sempre null (tokens não expiram)
</ResponseField>

<ResponseField name="message" type="string" nullable>
  Mensagem de erro. Null em caso de sucesso
</ResponseField>

### Funcionalidades Habilitadas

<ResponseField name="blockedContactsEnabled" type="boolean">
  Se a funcionalidade de bloqueio inteligente está habilitada (padrão: true)
</ResponseField>

<ResponseField name="pollCampaignsEnabled" type="boolean">
  Se a funcionalidade de enquetes está habilitada (padrão: true)
</ResponseField>

<ResponseField name="automationsEnabled" type="boolean">
  Se a funcionalidade de automações está habilitada (padrão: true)
</ResponseField>

<ResponseField name="automationLimit" type="number" nullable>
  Limite de automações permitidas para a empresa (padrão: configurado no sistema)
</ResponseField>

<ResponseExample>

```json 200 - Sucesso
{
  "accessToken": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "tokenType": "Access",
  "companyId": 1,
  "companyName": "Minha Empresa LTDA",
  "companyEmail": "contato@minhaempresa.com",
  "blockedContactsEnabled": true,
  "pollCampaignsEnabled": true,
  "automationsEnabled": true,
  "automationLimit": 10,
  "expiresAt": null,
  "message": null
}
```

```json 401 - Token Admin Ausente
{
  "accessToken": null,
  "tokenType": "Access",
  "companyId": null,
  "companyName": null,
  "companyEmail": null,
  "blockedContactsEnabled": null,
  "pollCampaignsEnabled": null,
  "automationsEnabled": null,
  "automationLimit": null,
  "expiresAt": null,
  "message": "Token de administrador é obrigatório"
}
```

```json 401 - Formato de Token Inválido
{
  "accessToken": null,
  "tokenType": "Access",
  "companyId": null,
  "companyName": null,
  "companyEmail": null,
  "blockedContactsEnabled": null,
  "pollCampaignsEnabled": null,
  "automationsEnabled": null,
  "automationLimit": null,
  "expiresAt": null,
  "message": "Formato de token inválido. Use: Bearer {senha}"
}
```

```json 401 - Token Admin Inválido
{
  "accessToken": null,
  "tokenType": "Access",
  "companyId": null,
  "companyName": null,
  "companyEmail": null,
  "blockedContactsEnabled": null,
  "pollCampaignsEnabled": null,
  "automationsEnabled": null,
  "automationLimit": null,
  "expiresAt": null,
  "message": "Token de administrador inválido"
}
```

```json 400 - Email Já Existe
{
  "accessToken": null,
  "tokenType": "Access",
  "companyId": null,
  "companyName": null,
  "companyEmail": null,
  "blockedContactsEnabled": null,
  "pollCampaignsEnabled": null,
  "automationsEnabled": null,
  "automationLimit": null,
  "expiresAt": null,
  "message": "Email já cadastrado"
}
```

```json 400 - Validação de Dados
{
  "accessToken": null,
  "tokenType": "Access",
  "companyId": null,
  "companyName": null,
  "companyEmail": null,
  "blockedContactsEnabled": null,
  "pollCampaignsEnabled": null,
  "automationsEnabled": null,
  "automationLimit": null,
  "expiresAt": null,
  "message": "Senha deve ter pelo menos 6 caracteres"
}
```

</ResponseExample>

## Validações

<CardGroup cols={2}>
  <Card title="Email" icon="envelope" color="#3b82f6">
    - Deve ser um email válido
    - Deve ser único no sistema
    - Máximo 100 caracteres
  </Card>
  <Card title="Senha" icon="key" color="#16a34a">
    - Mínimo 6 caracteres
    - Sem limite máximo
    - Armazenada com hash seguro
  </Card>
  <Card title="Nome" icon="building" color="#ef4444">
    - Opcional
    - Máximo 100 caracteres
    - Se vazio, usa parte do email
  </Card>
  <Card title="Token Admin" icon="shield" color="#8b5cf6">
    - Obrigatório
    - Formato: Bearer {senha}
    - Configurado no servidor
  </Card>
</CardGroup>

## Segurança

<Warning>
- O token de administrador deve ser mantido em segredo
- Nunca exponha o token de admin em código cliente
- Use este endpoint apenas em ambientes seguros
- Considere implementar rate limiting adicional
</Warning>

## Após o Registro

<Steps>
  <Step title="Salve o Access Token">
    Armazene o token retornado de forma segura para uso futuro
  </Step>
  <Step title="Configure Webhooks">
    Configure os webhooks para receber notificações de eventos
  </Step>
  <Step title="Crie Instâncias">
    Crie instâncias do WhatsApp para começar a enviar mensagens
  </Step>
  <Step title="Teste a API">
    Use o endpoint /api/auth/me para verificar se tudo está funcionando
  </Step>
</Steps>

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Fazer Login" icon="right-to-bracket" href="/api-reference/auth/login">
    Faça login com as credenciais criadas
  </Card>
  <Card title="Verificar Token" icon="shield-check" href="/api-reference/auth/me">
    Valide o access token obtido
  </Card>
</CardGroup>
