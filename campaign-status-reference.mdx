---
title: "Status e Tipos de Campanha"
description: "Refer√™ncia completa dos status e tipos de campanha na API Disparador"
---

<Note>
Esta p√°gina descreve todos os status e tipos poss√≠veis para campanhas na API Disparador, incluindo transi√ß√µes v√°lidas e comportamentos esperados.
</Note>

## Status de Campanha

As campanhas possuem 6 status diferentes que representam seu ciclo de vida:

<CardGroup cols={2}>
  <Card title="DRAFT" icon="file-edit" color="#6b7280">
    **Rascunho** - Campanha criada mas ainda n√£o executada
  </Card>
  <Card title="SCHEDULED" icon="calendar" color="#2563eb">
    **Agendada** - Campanha programada para execu√ß√£o futura
  </Card>
  <Card title="RUNNING" icon="play-circle" color="#16a34a">
    **Executando** - Campanha em execu√ß√£o ativa
  </Card>
  <Card title="PAUSED" icon="pause-circle" color="#d97706">
    **Pausada** - Campanha temporariamente pausada
  </Card>
  <Card title="COMPLETED" icon="check-circle" color="#7c3aed">
    **Conclu√≠da** - Campanha finalizada com sucesso
  </Card>
  <Card title="CANCELLED" icon="x-circle" color="#dc2626">
    **Cancelada** - Campanha interrompida permanentemente
  </Card>
</CardGroup>

## Tipos de Campanha

As campanhas podem ser de 2 tipos distintos:

<CardGroup cols={2}>
  <Card title="IMMEDIATE" icon="zap" color="#16a34a">
    **Imediata** - Execu√ß√£o come√ßou imediatamente ap√≥s cria√ß√£o
  </Card>
  <Card title="SCHEDULED" icon="clock" color="#2563eb">
    **Agendada** - Execu√ß√£o programada para data/hora espec√≠fica
  </Card>
</CardGroup>

## Fluxo de Status

### Campanha Imediata (IMMEDIATE)

```mermaid
graph LR
    A[DRAFT] --> B[RUNNING]
    B --> C[PAUSED]
    C --> B
    B --> D[COMPLETED]
    B --> E[CANCELLED]
    C --> E
```

1. **DRAFT** ‚Üí **RUNNING**: Quando criada sem agendamento
2. **RUNNING** ‚Üí **PAUSED**: Quando pausada pelo usu√°rio
3. **PAUSED** ‚Üí **RUNNING**: Quando retomada (at√© 24h)
4. **RUNNING** ‚Üí **COMPLETED**: Quando todas as mensagens s√£o enviadas
5. **RUNNING/PAUSED** ‚Üí **CANCELLED**: Quando cancelada pelo usu√°rio

### Campanha Agendada (SCHEDULED)

```mermaid
graph LR
    A[DRAFT] --> B[SCHEDULED]
    B --> C[RUNNING]
    C --> D[PAUSED]
    D --> C
    C --> E[COMPLETED]
    C --> F[CANCELLED]
    D --> F
    B --> F
```

1. **DRAFT** ‚Üí **SCHEDULED**: Quando criada com agendamento futuro
2. **SCHEDULED** ‚Üí **RUNNING**: Quando chega o hor√°rio agendado
3. **RUNNING** ‚Üí **PAUSED**: Quando pausada pelo usu√°rio
4. **PAUSED** ‚Üí **RUNNING**: Quando retomada (at√© 24h)
5. **RUNNING** ‚Üí **COMPLETED**: Quando todas as mensagens s√£o enviadas
6. **SCHEDULED/RUNNING/PAUSED** ‚Üí **CANCELLED**: Quando cancelada

## Regras de Transi√ß√£o

### ‚úÖ Transi√ß√µes Permitidas

| Status Atual | Status Destino | A√ß√£o Requerida | Condi√ß√µes |
|--------------|----------------|----------------|-----------|
| DRAFT | RUNNING | Criar campanha | Sem agendamento |
| DRAFT | SCHEDULED | Criar campanha | Com agendamento futuro |
| SCHEDULED | RUNNING | Autom√°tico | Hor√°rio agendado chegou |
| SCHEDULED | CANCELLED | Cancelar | A qualquer momento |
| RUNNING | PAUSED | Pausar | A qualquer momento |
| RUNNING | COMPLETED | Autom√°tico | Todas mensagens enviadas |
| RUNNING | CANCELLED | Cancelar | A qualquer momento |
| PAUSED | RUNNING | Retomar | Dentro de 24 horas |
| PAUSED | CANCELLED | Cancelar | A qualquer momento |

### ‚ùå Transi√ß√µes N√£o Permitidas

| Status Atual | Status Destino | Motivo |
|--------------|----------------|---------|
| COMPLETED | Qualquer outro | Campanha j√° finalizada |
| CANCELLED | Qualquer outro | Campanha foi cancelada |
| PAUSED | RUNNING | Mais de 24h pausada |

## Comportamentos por Status

### DRAFT
<div className="info-box">
  <div className="info-title">Comportamento</div>
  Status inicial quando a campanha √© criada. A campanha ainda n√£o est√° ativa e pode ser modificada.
</div>

**Caracter√≠sticas:**
- Nenhuma mensagem foi enviada
- Configura√ß√µes podem ser alteradas
- Contatos podem ser adicionados/removidos
- Pode ser iniciada ou agendada

### SCHEDULED
<div className="info-box">
  <div className="info-title">Comportamento</div>
  Campanha aguardando o hor√°rio programado para iniciar a execu√ß√£o.
</div>

**Caracter√≠sticas:**
- Hor√°rio de execu√ß√£o definido no futuro
- Aguardando trigger autom√°tico do scheduler
- Pode ser cancelada antes da execu√ß√£o
- Configura√ß√µes ficam bloqueadas para altera√ß√£o

### RUNNING
<div className="success-box">
  <div className="success-title">Comportamento</div>
  Campanha executando ativamente o envio de mensagens.
</div>

**Caracter√≠sticas:**
- Worker processando contatos da fila
- Mensagens sendo enviadas conforme intervalo configurado
- Progresso atualizando em tempo real
- Pode ser pausada ou cancelada

### PAUSED
<div className="warning-box">
  <div className="warning-title">Comportamento</div>
  Campanha temporariamente suspensa. Pode ser retomada em at√© 24 horas.
</div>

**Caracter√≠sticas:**
- Envio de mensagens interrompido
- Progresso preservado
- Limite de 24 horas para retomada
- Ap√≥s 24h, s√≥ pode ser cancelada

### COMPLETED
<div className="success-box">
  <div className="success-title">Comportamento</div>
  Campanha finalizada com sucesso. Todas as mensagens foram processadas.
</div>

**Caracter√≠sticas:**
- 100% dos contatos processados
- Estat√≠sticas finais dispon√≠veis
- Notifica√ß√£o de conclus√£o enviada (se configurada)
- Status final imut√°vel

### CANCELLED
<div className="warning-box">
  <div className="warning-title">Comportamento</div>
  Campanha cancelada permanentemente. N√£o pode ser retomada.
</div>

**Caracter√≠sticas:**
- Envio interrompido definitivamente
- Progresso preservado at√© o momento do cancelamento
- Estat√≠sticas parciais dispon√≠veis
- Status final imut√°vel

## Valida√ß√µes da API

### Endpoint: Pausar Campanha
```http
PUT /api/campaigns/{id}/pause
```

**Valida√ß√µes:**
- Status deve ser `RUNNING`
- Campanha deve pertencer √† empresa autenticada
- N√£o pode estar h√° mais de 24h pausada anteriormente

### Endpoint: Retomar Campanha
```http
PUT /api/campaigns/{id}/resume
```

**Valida√ß√µes:**
- Status deve ser `PAUSED`
- N√£o pode ter mais de 24 horas pausada
- Campanha deve pertencer √† empresa autenticada

### Endpoint: Cancelar Campanha
```http
PUT /api/campaigns/{id}/cancel
```

**Valida√ß√µes:**
- Status N√ÉO pode ser `COMPLETED` ou `CANCELLED`
- Campanha deve pertencer √† empresa autenticada

## C√≥digos de Exemplo

### Verificar Status de Campanha

<RequestExample>

```bash cURL
curl -X GET https://{url-key}/api/campaigns/123 \
  -H "X-Access-Token: {access_token}"
```

```javascript JavaScript
const response = await fetch('https://{url-key}/api/campaigns/123', {
  headers: {
    'X-Access-Token': 'your-access-token'
  }
});

const campaign = await response.json();
console.log('Status:', campaign.status);
console.log('Tipo:', campaign.type);
```

```python Python
import requests

headers = {'X-Access-Token': 'your-access-token'}
response = requests.get('https://{url-key}/api/campaigns/123', headers=headers)

campaign = response.json()
print(f"Status: {campaign['status']}")
print(f"Tipo: {campaign['type']}")
```

</RequestExample>

### L√≥gica de Status em Frontend

<RequestExample>

```javascript Status Display
function getStatusDisplay(status) {
  const statusConfig = {
    'DRAFT': { label: 'Rascunho', color: 'gray', icon: 'üìù' },
    'SCHEDULED': { label: 'Agendada', color: 'blue', icon: 'üìÖ' },
    'RUNNING': { label: 'Executando', color: 'green', icon: '‚ñ∂Ô∏è' },
    'PAUSED': { label: 'Pausada', color: 'yellow', icon: '‚è∏Ô∏è' },
    'COMPLETED': { label: 'Conclu√≠da', color: 'purple', icon: '‚úÖ' },
    'CANCELLED': { label: 'Cancelada', color: 'red', icon: '‚ùå' }
  };
  
  return statusConfig[status] || { label: 'Desconhecido', color: 'gray', icon: '‚ùì' };
}

// Verificar se a√ß√µes s√£o permitidas
function canPause(status) {
  return status === 'RUNNING';
}

function canResume(status, pausedAt) {
  if (status !== 'PAUSED') return false;
  
  const pausedTime = new Date(pausedAt);
  const now = new Date();
  const hoursDiff = (now - pausedTime) / (1000 * 60 * 60);
  
  return hoursDiff < 24;
}

function canCancel(status) {
  return !['COMPLETED', 'CANCELLED'].includes(status);
}
```

</RequestExample>

## Pr√≥ximos Passos

<CardGroup cols={3}>
  <Card title="Criar Campanha" icon="plus" href="/api-reference/campaigns/create">
    Como criar uma nova campanha
  </Card>
  <Card title="Gerenciar Status" icon="settings" href="/api-reference/campaigns">
    Opera√ß√µes de status dispon√≠veis
  </Card>
  <Card title="Monitoramento" icon="chart-bar" href="/monitoring">
    Monitore campanhas em tempo real
  </Card>
</CardGroup>